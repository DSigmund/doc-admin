<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">

<section id="scheduler">
    <title>OTRS Scheduler</title>
    <para>
        The OTRS Scheduler is an independent system process that executes tasks in
background. These kind of processes are know as <emphasis>daemons</emphasis>
in Unix / Linux systems.  It is independent but that doesn't mean that the
Scheduler does everything alone, it is fully integrated into OTRS and can
use any OTRS module as needed to complete each task.
    </para>

    <para>
        Aus Sicherheitsgründen muss der Scheduler-Prozess von Zeit zu Zeit neu
gestartet werden. Dies wird automatisch vom Scheduler-Prozess einmal täglich
ausgelöst, aber dieser Zeitraum kann nach eigenen Bedürfnissen angepasst
werden, indem der Wert in der SysConfig "Scheduler::RestartAfterSeconds"
bearbeitet wird.
    </para>
    <para>
        Der OTRS Scheduler ist ein vollautomatischer Dienst, der einzigste Eingriff
durch einen Menschen erfolgtbeim periodischen Überprüfen des Status oder
beim starten oder stoppen des Schedulers, sofern benötigt.
    </para>
    <note>
        <para>
            Wenn der Scheduler aus irgendwelchen Gründen gestoppt werden sollte, werden
alle ausstehenden Tasks und alle neu hinzugefügten Tasks wieder ausgeführt,
sobald der Scheduler erneut gestartet wurde (es sei denn die Tasks wurden
geplant, dass sie in der Zukunft ausgeführt werden sollen).
        </para>
    </note>
    <section id="scheduler-gui">
        <title>Scheduler  - Grafisches Interface</title>
        <para>
            Der Scheduler ist nicht sichtbar in der grafischen Oberfläche von OTRS
solange er läuft.
        </para>
        <section id="scheduler-gui-notify">
            <title>Benachrichtigung: Scheduler läuft nicht.</title>
            <para>
                There are two different types of notifications if the system detects that
the scheduler is not running. This detection is based on the update
frequency of the Scheduler process. If the difference between current time
and the last process update time is 2 times the process update frequency a
warning message will be displayed in the OTRS notification area. If it is
over 4 times the process frequency then an alert will be displayed instead.
            </para>
            <para>
                Die Aktualisierungszeit des Schedulers kann in der SysConfig in der
Einstellung "Scheduler::PIDUpdateTime" konfiguriert werden
            </para>
            <para>
                Wenn Sie eine Warnung erhalten, ist es nicht immer notwendig eine Aktion
durchzuführen, aber es wird empfohlen, dass Sie überprüfen, ob der Scheduler
Prozess läuft. Wenn Sie einen Alarm-Benachrichtigung erhalten, dann ist es
ziemlich wahrscheinlich, dass der Scheduler nicht läuft, und dass er
gestartet werden sollte.
            </para>
            <para>
                By default the Scheduler not running notification is enabled, if there is a
valid web service registered in the database, and is only displayed to the
users in the "admin" group.
            </para>
            <para>
                To disable the notification (not recommended) or to change or add the
notification groups, please edit the
"Frontend::NotifyModule###800-Scheduler-Check" setting in the SysConfig.
            </para>
            <para>
                <screenshot>
<screeninfo>Scheduler Benachrichtigung</screeninfo> <graphic srccredit="scheduler
notification - screenshot" scale="40"
fileref="screenshots/scheduler-notify.png"></graphic></screenshot>
            </para>
            <para>
                <emphasis>Abbildung: Scheduler Benachrichtigung.</emphasis>
            </para>
        </section>
        <section id="scheduler-gui-start">
            <title>Scheduler starten</title>
            <para>
                By clicking on the Scheduler not running notification link (either warning
or alert) a dialog box will open to let you start the Scheduler process
again. The Scheduler can be started normally or forced to start, by clicking
on the appropriate check box in the dialog.
            </para>
            <note>
                <para>
                    A forced Scheduler start is only necessary if previous Scheduler process was
terminated abnormally and the Process ID is still registered in the
database.
                </para>
                <para>
                    Um vollen Zugriff auf den Scheduler Prozess zu erhalten und dessen echten
Status zu überprüfen, nutzen Sie bitte die Kommandozeilen Tools, die weiter
unten beschrieben werden.
                </para>
            </note>
            <para>
                <screenshot>
<screeninfo>Scheduler starten</screeninfo> <graphic srccredit="scheduler start
- screenshot" scale="40"
fileref="screenshots/scheduler-start.png"></graphic></screenshot>
            </para>
            <para>
                <emphasis>Abbildung: Start Scheduler.</emphasis>
            </para>
        </section>
    </section>
    <section id="scheduler-cli">
        <title>Scheduler-Befehlszeilenoberfläche</title>
        <para>
            The Scheduler command line tools let you control the Scheduler process
(Start / Stop) or query it status. There are also tools to register the
process to be controlled by the operating system.
        </para>
        <para>
            In OTRS enthalten sind auch Kommandozeilen Tools (CLI) für den Scheduler.
        </para>
        <section id="scheduler-cli-linux-init">
            <title>Scheduler init.d Dateien</title>
            <para>
                Die Init.d Dateien sind spezielle Scripte, welche vom Betriebssystem beim
Hoch- und Herunterfahren aufgerufen werden.
            </para>
            <para>
                OTRS stellt init.d scripts zum automatischen starten / stoppen des OTRS
Scheduler Prozesses durch das Betriebssystem zur Verfügung. Diese Scripte
befinden sich unter OTRS_Home/scripts.
            </para>
            <para>
                The init.d scripts need to be copied to the correct location for your
operating system. They need to have the proper permissions and some internal
variables need to be set to work properly. If you used the OTRS RPMs to set
up the system, this is taken care of automatically.
            </para>
            <itemizedlist mark="round">
                <title>interne Werte des Init.d Skript</title>
                <listitem>
                    <para>
                        <command>OTRS_HOME</command> -  Der Installationspfad von OTRS.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <command>User</command> - Der Benutzer unter dem Apache ausgeführt wird.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <command>Group</command> -  Die Gruppe unter dem Apache ausgeführt wird.
                    </para>
                </listitem>
            </itemizedlist>
            <note>
                <para>
                    Zur Zeit bietet OTRS init.d-Skripte nur für Linux-Plattformen an.
                </para>
            </note>
            <table>
                <title>Liste der init-Skripte und der unterstützten Betriebssysteme</title>
                <tgroup cols="2">
                <thead>
                    <row>
                        <entry>Init-Skript</entry>
                        <entry>Unterstützte Betriebssysteme</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>OTRS Scheduler Linux</entry>
                        <entry>Red Hat, Fedora, CentOS, SUSE, openSUSE, Debian, Ubuntu</entry>
                    </row>
                    <row>
                        <entry>otrs-scheduler-gentoo-init.d, otrs-scheduler-gentoo-conf.d</entry>
                        <entry>Gentoo</entry>
                    </row>
                </tbody>
                </tgroup>
            </table>
            <example>
                <title>Ein Beispiel wie der OTRS Scheduler unter Linux gestartet wird.</title>
                <para>
                    <screen>
shell> /etc/init.d/otrs-scheduler-linux start</screen>
                </para>
            </example>
            <itemizedlist mark="round">
                <title>Verfügbare Aktionen</title>
                <listitem>
                    <para>
                        <command>start</command> startet den OTRS Scheduler
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <command>stop</command> stoppt den OTRS Scheduler.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <command>restart</command> startet den OTRS Scheduler neu.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <command>status</command> Statusabfrage des OTRS Schedulers
                    </para>
                </listitem>
            </itemizedlist>
            <para>
                Der Scheduler benötigt die Datenbank um die Prozess ID zu registrieren. Aus
diesem Grund sind folgende Dinge notwendig:
                <itemizedlist mark="round">
                    <listitem>
                        <para>
                            Führen Sie das Scheduler init.d Script aus, um den Scheduler Prozess zu
<emphasis>starten</emphasis>, nachdem der Datenbank Prozess gestartet worden
ist und läuft.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Führen Sie das Scheduler init.d Script aus, um den Scheduler zu
<emphasis>stoppen</emphasis>, bevor der Datenbank Prozess beendet wird.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
            <note>
                <para>
                    Wenn Sie wollen, dass der Scheduler beim Systemstart ausgeführt wird, lesen
Sie bitte die Dokumentation zu ihrem Betriebssystem um den richtigen Ort zum
hinterlegen der init.d Scripts herauszufinden, ebenso wie sie diese
konfigurieren, dass sie automatisch starten und wie die Ausführungsordnung
eingestellt wird.
                </para>
            </note>
        </section>
        <section id="scheduler-cli-linux-daemon">
            <title>Zeitplaner-Hitergrunddatei</title>
            <para>
                Das ist der Teil des Schedulers, der im Hintergrund weiterläuft und
überprüft ob Tasks ausgeführt werden müssen. Er stellt außerdem die
Hauptfunktionen zum Steuern des Prozesses zur Verfügung.
            </para>
            <para>
                Alle Unix / Linux Betriebsysteme nutzen die Datei
<command>OTRS_HOME/bin/otrs.Scheduler.pl</command>.
            </para>
            <example>
                <title>Ein Beispiel wie der OTRS Scheduler gestartet wird.</title>
                <para>
                    <screen>
                        Shell> OTRS_HOME/bin/otrs.Scheduler.pl -a start
                    </screen>
                </para>
            </example>
            <itemizedlist mark="round">
                <title>Verfügbare Optionen</title>
                <listitem>
                    <para>
                        <command>-a </command> Aktion.
                    </para>
                    <itemizedlist mark="round">
                        <title>mögliche Werte</title>
                        <listitem>
                            <para>
                                <command>start</command>- startet den Scheduler.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <command>stop</command>- stoppt den Scheduler.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <command>status</command>- fragt den Status des Scheduler ab.
                            </para>
                        </listitem>
                    </itemizedlist>
                </listitem>
                <listitem>
                    <para>
                        <command>-f </command> erzwingt das starten oder stoppen des Scheduler.
                    </para>
                </listitem>
            </itemizedlist>
            <example>
                <title>Beispiel für das erzwungene stoppen des OTRS Scheduler.</title>
                <para>
                    <screen>
                        Shell> OTRS_HOME/bin/otrs.Scheduler.pl -a stop -f 1
                    </screen>
                </para>
            </example>
            <note>
                <para>
                    Das erzwungene stoppen des Schedulers wird verwendet um die Prozess ID aus
der Datenbank zu entfernen wenn der Scheduler nicht läuft, aber der Prozess
registriert ist
                </para>
                <para>
                    Das erzwungene starten des Schedulers wird verwendet wenn der Scheduler
nicht läuft, aber der Prozess registriert ist
                </para>
                <para>
                    Force start or stop are only necessary if the start of the process is needed
to be done before the process update time expires. Otherwise an expired
entry in the database is discarded by normal start.
                </para>
            </note>
        </section>
    </section>
</section>
