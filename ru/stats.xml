<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">


<!-- $Id: stats.xml,v 1.7 2011-02-16 08:56:01 mg Exp $ -->
<chapter id="statistic-module">
<title>Stats-модуль</title>

<para>
Статистика и отчеты необходимы компаниям. На основе статистики, информация
может быть оценена что может дать толчек для обоснованых решений в будущем.
</para>

<para>
Модуль статистики должен удовлетворять множество требований:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
        Должны быть определены и взяты во внимание различные модули OTRS.
        </para>
    </listitem>
    <listitem>
        <para>
        Взяты во внимание права доступа пользователей для соответствующей установки.
        </para>
    </listitem>
    <listitem>
        <para>
        Создание сложной статистики.
        </para>
    </listitem>
    <listitem>
        <para>
        Простая и быстрая настройка статистики.
        </para>
    </listitem>
    <listitem>
        <para>
        Высокая производительность.
        </para>
    </listitem>
    <listitem>
        <para>
        Поддержка большого числа способов вывода.
        </para>
    </listitem>
</itemizedlist>
</para>

<para>
Модуль статистики OTRS старается удовлетворить всем этим
требованиям. Основной особеностью является графический интерфейс, который
позволяет настроить статистику несколькими щелчками мыши.
</para>

<para>
Статистические элементы, такие как например файлы, которые дополняют
функциональные возможности модуля статистики для конкретых требований, могут
быть интегрированы для моделирования сложной статистики.
</para>

<para>
Все требования, касающиеся оценки личных данных были рассмотрены. Это,
например, нету возмжности напрямую вычислить активность отдельных агентов в
стандартной конфигурации.
</para>

<para>
Модуль статистики OTRS позволяет пользователям быстро и легко сделать оценку
активности их системы.
</para>

<section id="stats-usage" >
<title>Обработка модуля агентом</title>

<para>
Как только модуль статистики установлен и успешно настроен
OTRS-администратором, то для каждого агента, который имеет права для чтения
и/или записи, в навигационной панели отображается дополнительнаяя ссылка на
модуль "Статистика", который имеет ссылки на различные действия, как
показано на Рисунке 19.1.
</para>

<para>
<screenshot>
<screeninfo>Модуль статистики</screeninfo> <graphic
fileref="screenshots/stats-menu.png" scale="40" srccredit="stats-menu -
Screenshot" /></screenshot>
</para>

<para>
    <emphasis>Рисунок 19.1. Список действий для статистики. </emphasis>
</para>

<para>
Различные варианты представленные в меню статистики:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
            <emphasis>Обзор</emphasis>. Автоматически отображается если ссылка на модуль
"Статистика" закрыта.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Новая</emphasis>. Требуются права rw.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Импорт</emphasis>. Требуются rw-права.
        </para>
    </listitem>
</itemizedlist>
</para>

<section id="stats-overview" >
<title>Обзор</title>

<para>
Список всех предварительных настроек, которые может использовать агент
(см. ниже Рисунок 19.2).
</para>

<para>
Самый простой способ доступа к просмотру - это выбрать ссылку "Статистика",
а затем ссылку "Обзор" в панели навигации. Обзор статистики вызывается
автоматически, когда модуль "Статисткика" закрыт в навигационной панели.
</para>

<para>
<screenshot>
<screeninfo>Обзор стандартной статистики</screeninfo> <graphic
fileref="screenshots/stats-overview.png" scale="40"
srccredit="stats-overview - Screenshot" /></screenshot>
</para>

<para>
    <emphasis>Рисунок 19.2. Обзор стандартной статистики.</emphasis>
</para>

<para>
В обзоре приведена следующая информация о статистике:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
            <emphasis>Stat#</emphasis>. Уникальный номер.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Заголовок</emphasis>. Заголовок статистики.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Объект</emphasis>. Объект использующийся для генерации
статистики. В случае статической статистики, не отображается ниодин обьект,
поскольку динамические обьекты не используются для создания статистики.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Описание</emphasis>. Выдержка из описания статистики.
        </para>
    </listitem>
</itemizedlist>
</para>

<para>
Ниже под списком статистики отображаются результаты, которые предоставляют
информацию о количестве доступной статистики. Если их количество превышает
одну страницу, то агнент может перемещатся между разными страницами.
</para>

<para>
Агенты не имеют возможности сотрировать статистику по возрастанию или
убыванию в соответствии с их потребностями, просто нажав на соответствующие
ключевые слова в заголовке.
</para>

<para>
Для генерации статистики, правильно выбрать один нажав ссылку с номером
статистики, что приведет к переходу на страницу "Просмотр" пользовательского
интерфейса.
</para>

<para>
Несколько образцов статистики импортируется когда модуль статистики
используется впервые.
</para>

</section>

<section id="stats-viewing-generating">
<title>Создание и просмотрт статистики</title>

<para>
Интерфейс просмотра пользователей должен предоставлять агенту обзор
предварительной конфигурации (см. ниже Рисунок 19.3).
</para>

<para>
<screenshot id="stats-view-screenshot" >
<screeninfo>Просмотр статистики</screeninfo> <graphic
fileref="screenshots/stats-view.png" scale="40" srccredit="stats-view -
Screenshot" /></screenshot>
</para>

<para>
    <emphasis>Рисунок 19.3. Просмотр конкретной статистики.</emphasis>
</para>

<para>
Агенты могут выполнять настройку в диапазоне предварительной
конфигурации. Создатель конфигурации статистики может определить степень, в
которой можножно влиять на статистику. Самым экстремальным примером этого
могут быть агенты, которые не могут повлиять на любые изменения или могут
изменить все атрибуты, соответственно.
</para>

<para>
На странице отображается следующее:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
        Возможные действия:
        </para>

        <para>
        <itemizedlist>
            <listitem>
                <para>
                    <emphasis>Перейти к обзору</emphasis>. Ссылка обратно, в начальную точку.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Редактировать</emphasis>. Редактировать текущую статистику
(требуются права для чтения и записи, RW).
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Удалить</emphasis>.  Удалить текущую статистику(требуются права
для чтения/записи, rw).
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Экспортировать настройки</emphasis>.  Экспортировать настройки
конфигурации, скачать их (требуются права для чтения и записи, rw).
                </para>

                <para>
                    Использование: экспорт и импорт функций позволяют с легкостью создавать и
тестировать статистику та тестовых системах и их последующую интеграцию в
производственную систему.
                </para>
            </listitem>
        </itemizedlist>
        </para>
    </listitem>
    <listitem>
        <para>
        Подробные данные о статистике:
        </para>
        <para>
        <itemizedlist>
            <listitem>
                <para>
                    <emphasis>Stat#</emphasis>.  Номер статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Заголовок</emphasis>. Заголовок статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Объект</emphasis>. Объект, используемый для создания статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Описание</emphasis>. Обеспечивает более подробную информацию о
назначении статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Формат</emphasis>. Выходной формат статистики. В зависимости от
конфигурации, может быть выбран любой из следующих форматов:
                </para>
                <para>
                <itemizedlist>
                    <listitem>
                        <para>
                        CSV.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Печать.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Графические линии.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Столбцовая диаграмма.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Диаграмма.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Точечная диаграмма.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Точечно-линейная диаграмма.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Диаграмма
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Круговая "пирожок"-диаграмма.
                        </para>
                    </listitem>
                </itemizedlist>
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Размер в пикселях</emphasis>. Размер (в пикселях) который может
иметь график/диаграмма. Эта опция доступна только в том случае, если
доступна предварительная настройка для графиков. Все основные и часто
используемые графические размеры настраиваются в панели управления OTRS в
SysConfig. Агент может выбрать все предварительно доступные форматы во время
настройки статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Сумма строк</emphasis>. Указывает когда статистика не помещается в
выделенную колонку, ячейки которой содержат соответствующие строки.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Sum columns</emphasis>.  Indicates whether the stat is amended by
a row, whose cells state the sum of the respective columns.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Кэш</emphasis>. Указывается когда созданная статистика кэшируется
в файловой системе.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Правильный</emphasis>. Устанавливается в значение "invalid" если
предварительно настроенная статистика по прежнему остается или не может быть
использована временно по определенным причинам. Также кнопка "Статистика"  в
правом нижнем углу блока не отображатеся. Статистика не может больше
отображатся.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Создана</emphasis>.  Время создания статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Создана (кем)</emphasis>. Агент, который создал эту статистику.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Изменена</emphasis>. Время последней модификации статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Изменена кем</emphasis>. Агент, который внес изменения в
статистику.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>X-axis</emphasis>. Используя эту функцию, агент может
обмениватсься x и y axes (только если эта функциональность активирована
OTRS-администратором).
                </para>
            </listitem>
            <listitem>
                <para>
                Общая информация сопровождается информацией о самой статистике. Доступны два
различных шаблона просмотра:
                </para>
                <para>
                <itemizedlist>
                    <listitem>
                        <para>
                            <emphasis>Статический шаблон для просмотра статистики</emphasis>.  Сложная
статистика не может быть сгенерирована динамически, "на-лету", это и
является главной причиной, почему статистические генераторы не могут быть
интегрированы в модуль статистики (см. ниже Рисунок 19.4). Они были
разработаны специально для конкретной оценки. Различные задания для
различных шаблонов.
                        </para>
                        <para>
                        <screenshot>
<screeninfo>Статические шаблоны для просмотра статистики</screeninfo> <graphic
fileref="screenshots/stats-view-static.png" scale="40"
srccredit="stats-view-static - Screenshot" /></screenshot>
                        </para>
                        <para>
                            <emphasis>Рисунок 19.4. Просмотр статической статистики.</emphasis>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <emphasis>Шаблон для просмотра динамической статистики</emphasis> (см. ниже
Рисунок 19.3 ).  Они не могут отображатся двумя различными способами:
                        </para>
                        <para>
                        <itemizedlist>
                            <listitem>
                                <para>
                                    <emphasis>Неизменяемые настройки</emphasis>. Создатель статистики не имеет
разрешения на изменения этого поля.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    <emphasis>Изменяемые настройки</emphasis>. Предварительная конфигурация
такой статистики может быть изменена агентом.
                                </para>
                            </listitem>
                        </itemizedlist>
                        </para>
                    </listitem>
                </itemizedlist>
                </para>
            </listitem>
        </itemizedlist>
        </para>
    </listitem>
</itemizedlist>
</para>

<para>
При нажатии кнопки "Пуск" (в нижней части экрана) является последним, самым
простым шагом для создания статистики. Есть две возможные причины, что эта
кнопка не отображается:
</para>

<para>
<orderedlist numeration="arabic" >
    <listitem>
        <para>
        Статистика была установлена как недействительная и отключена.
        </para>
    </listitem>
    <listitem>
        <para>
        Статистика была настроена не аккуратно и, следовательно, не может
выполнятся. В этом случае необходимую информацию можно найти в разделе
уведомления системы OTRS (под навигационной панелью).
        </para>
    </listitem>
</orderedlist>
</para>

<para>
Если настройки страницы просмотра неверны, эта страница отображается опять,
после нажатия кнопки "Пуск", и информация о том что шаблон настроен не
правильно будет отображатся в разделе уведомлений.
</para>
</section>

<section id="stats-modify-new">
<title>Редактировать - Новая</title>

<para>
Агенты, которые имеют права на запись могут редактировать существующую
конфигурацию статистики, вызвав пользовательский веб-интерфейс для
редактирования модуля статистики. Для этого есть два возможных варианта
действий:
</para>

<para>
<orderedlist numeration="arabic">
<listitem>
    <para>
    Via the "Edit" button in the stat view.
    </para>
</listitem>
<listitem>
    <para>
    Via the "New" link in the menu of the Statistics module in the navigation
bar.
    </para>
</listitem>
</orderedlist>
</para>

<para>
The stats are edited with a wizard in four steps:
</para>

<para>
<orderedlist numeration="arabic">
<listitem>
    <para>
    General specifications.
    </para>
</listitem>
<listitem>
    <para>
    Definition of the element for the X-axis.
    </para>
</listitem>
<listitem>
    <para>
    Specification of the value series.
    </para>
</listitem>
<listitem>
    <para>
    Definition of the restrictions to characterize the stat.
    </para>
</listitem>
</orderedlist>
</para>

<para>
Points 2 to 4 are only needed for the generation of dynamic stats. For a
static stat, only the general information (point 1) is required.
</para>

<para>
Information about how to handle the page is provided below the input forms,
on all input user interfaces of the stats module.
</para>

<para>
If incorrect data is entered nevertheless, the previously processed user
interface is displayed again and amended by information about the incorrect
input.  This information can be found in the OTRS notification section. The
next input user interface is only displayed after the form has been filled
out correctly.
</para>

<para>
<orderedlist numeration="arabic" >
<listitem>
    <para>
        <emphasis>General specifications</emphasis>.  It is the first page of the
wizard (see Figure 19.5 below).
    </para>

    <para>
    <screenshot>
<screeninfo>General specifications of the stat</screeninfo> <graphic
fileref="screenshots/stats-edit-general.png" scale="40"
srccredit="stats-edit-general - Screenshot" /></screenshot>
    </para>

    <para>
        <emphasis>Figure 19.5. Editing the general specifications of a
stat.</emphasis>
    </para>


    <para>
        In the screen showed in the Figure 19.5 there is a great number of common
specifications and settings can be edited:
    </para>

    <para>
    <itemizedlist>
        <listitem>
            <para>
                <emphasis>Title</emphasis>.  Should reflect the stat's purpose in a concise
manner.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Description</emphasis>.  More detailed information about the job
definition, type of configuration parameters, etc.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Dynamic object</emphasis>.  If the OTRS installation provides
various dynamic objects, one of them can be chosen.  The objects meet the
requirements of the particular modules.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Static file</emphasis>.  Usually this selection is not shown, as
only static files which are not yet assigned to any stats are displayed. If
"Static file" is displayed, however, it is important to tick the option
field and select a generation mode (dynamic with a dynamic object or static
with a file).  If a static file is selected, the input user interfaces 2-4
are not shown as the static file contains all required configurations.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Permission settings</emphasis>.  Facilitate a restriction of the
groups (and therefore, agents) who can later view and generate the
preconfigured stats. Thus the various stats can be allocated to the
different departments and work groups who need them. It is possible to
allocate one stat to various groups.
            </para>

            <para>
                Example 1: The "stats" group was selected. The stat is viewable for all
users having at least ro rights for the "stats" group. As the base
requirement for accessing the view mode of the stat module in the default
configuration is to have ro rights in the "stats" group, all users with
permission to create statistics can view it in this configuration.
            </para>

            <para>
                Example 2: A group named "sales" was selected. All users with ro rights for
the "sales" group can see the stat in the view mode and generate
it. However, the stat will not be shown to other users with permission to
generate stats.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Format</emphasis>.  Output format of the stat.  Depending on the
configuration, one or more of the following formats can be chosen:
            </para>

            <para>
            <itemizedlist>
                <listitem>
                    <para>
                        CSV.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Печать.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-lines.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-bars.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-hbars.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-points.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-lines-points.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-area.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-pie.
                    </para>
                </listitem>
            </itemizedlist>
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Graphsize</emphasis>.  Select the size (in pixels) the charts
should have. This selection is only necessary if a graphical output format
has been chosen under "Format".  All graphic sizes that can generally be
used are defined by the OTRS admin in SysConfig. When configuring the stat,
the agent can pre-select all relevant formats.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Sum rows</emphasis>.  Indicates whether the stat is amended by a
column, whose cells contain the sum of the respective row.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Sum columns</emphasis>.  Indicates whether the stat is amended by
a row, whose cells contain the sum of the respective column.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Cache</emphasis>.  Specifies if the generated stats should be
cached in the file system.  This saves computing power and time if the stat
is called up again, but it only should be used if the stat's content is no
longer changing.
            </para>

            <para>
                Caching is automatically prevented if the stat contains no time designation
values (new data is added continuously) or if a time designation value
points to the future.
            </para>

            <para>
                If a cached stat is edited, all cached data is deleted.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Valid</emphasis>.  It is set "invalid" if a pre-configured stat is
still being created or must not be used temporarily for certain
reasons. Also the "Start" button in the bottom right of the block is no
longer displayed. It is impossible to generate the stat.
            </para>
        </listitem>
    </itemizedlist>
    </para>
</listitem>
<listitem>
    <para>
        <emphasis>Definition of the element for the X-axis</emphasis>.  It is the
configuration of the element used for the depiction of the X-axis or, if
tables are used, of the column name chosen for the stat (see Figure 19.6).
    </para>

    <para>
    <screenshot>
<screeninfo>Definition of the element for the X-axis.</screeninfo> <graphic
fileref="screenshots/stats-edit-xaxis.png" scale="40"
srccredit="stats-edit-xaxis - Screenshot" /></screenshot>
    </para>

    <para>
        <emphasis>Figure 19.6. Definition of the element for the X-axis.</emphasis>
    </para>

    <para>
    First of all, an element is selected using the option field. Then two or
more attributes of the element must be selected. If no attributes are
selected, all attributes are used including those added after the
configuration of the stat.
    </para>

    <para>
    If the "Fixed" setting is disabled, the agent generating the stat can change
the attributes of the respective element in the "View" user interface.
    </para>

    <para>
    Time elements are different as time period and scale have to be stated.
Type and number of elements result from the used dynamic object and vary
depending on it.
    </para>

    <para>
    If all input is correct, the "Next" button leads to the "Value series"
form. It is also possible to go back to editing the "common statements"
section again.
    </para>
</listitem>
<listitem>
    <para>
        <emphasis>Specification of the value series</emphasis>.
    </para>

    <para>
    In the third step of the stat pre-configuration the value series are defined
(see Figure 19.7 below). They will lateron form the individual graphs of a
diagramm or the various series (tabular view).
    </para>

    <para>
    <screenshot>
<screeninfo>Definition of the value series</screeninfo> <graphic
fileref="screenshots/stats-edit-valueseries.png" scale="40"
srccredit="stats-edit-valueseries - Screenshot" /></screenshot>
    </para>

    <para>
        <emphasis>Figure 19.7. Definition of the value series.</emphasis>
    </para>

    <para>
    If an element is selected, each chosen attribute will correspond to a value
series (see the Example 19-1 below).
    </para>

    <para>
    <example id="stats-value-series-1">
    <title>Definition of a value series - one element</title>

    <para>
    Element Queue:
    </para>

    <para>
    <itemizedlist>
        <listitem>
            <para>
            Value series 1 = Raw
            </para>
        </listitem>
        <listitem>
            <para>
            Value series 2 = Junk
            </para>
        </listitem>
        <listitem>
            <para>
            ....
            </para>
        </listitem>
    </itemizedlist>
    </para>
    </example>
    </para>

    <para>
    If two elements are selected, each selected attribute of the first element
is combined with an attribute of the second element to form a value series
(see the Example 19-2 below).
    </para>

    <para>
    <example id="stats-value-series-2" >
    <title>Definition of a value series - two elements </title>

    <para>
    Element 1 queue and element 2 status:
    </para>

    <para>
    <itemizedlist>
        <listitem>
            <para>
            Value chain 1 = Raw - open
            </para>
        </listitem>
        <listitem>
            <para>
            Value series 2 = Raw - successfully closed
            </para>
        </listitem>
        <listitem>
            <para>
            Value series 3 = Junk - open
            </para>
        </listitem>
        <listitem>
            <para>
            Value series 4 = Junk - successfully closed
            </para>
        </listitem>
    </itemizedlist>
    </para>
    </example>
    </para>

    <para>
    Selection of three or more elements does not make sense and is, therefore,
prevented by an error message.
    </para>

    <para>
    Additionally the same conditions apply to the selection of the attributes
and the "Fixed" checkbox as to the "X-axis" selection:
    </para>

    <para>
    <itemizedlist>
        <listitem>
            <para>
            If no attributes of the element are selected, all attributes are used,
including those added after the configuration of the stat.
            </para>
        </listitem>
        <listitem>
            <para>
            If the "Fixed" setting is disabled, the agent generating the stat can change
the attributes of the respective element.
            </para>
        </listitem>
    </itemizedlist>
    </para>
</listitem>
<listitem>
    <para>
        <emphasis>Definition of the restrictions to characterize the
stat</emphasis>.  It is the fourth and last step of the pre-configuration
(see Figure 19.8 below).  The restrictions facilitate to limit the results
and are comparable to entering data into a search window. In quite a few
cases, no restrictions at all must be set up.
    </para>

    <para>
    <screenshot>
<screeninfo>Definition of restrictions</screeninfo> <graphic
fileref="screenshots/stats-edit-restrictions.png" scale="40"
srccredit="stats-edit-restrictions - Screenshot" /></screenshot>
    </para>

    <para>
        <emphasis>Figure 19.8. Definition of restrictions.</emphasis>
    </para>

    <para>
    After all restrictions are set, the pre-configuration of the stat is
finished with the "Finish" button and the "View" user interface is called
up.
    </para>
</listitem>
</orderedlist>
</para>
</section>

<section id="stats-import">
<title>Import</title>

<para>
The import user interface (see Figure 19.9 below) can be accessed by chosing
"Import" in the navigation bar (rw rights required).
</para>

<para>
<screenshot>
<screeninfo>The import user interface</screeninfo> <graphic
fileref="screenshots/stats-import.png" scale="40" srccredit="stats-import -
Screenshot" /></screenshot>
</para>

<para>
    <emphasis>Figure 19.9. The import user interface.</emphasis>
</para>

<para>
Facilitates the import of stats and is, combined with the export function of
the module, a very handy functionality. Stats can be created and tested
conveniently on test systems and then imported into the production system.
</para>

<para>
The import is effected by an easy file upload. The "view" user interface of
the imported stat is opened automatically afterwards.
</para>
</section>

</section>

<section id="stats-managing-the-module">
<title>Administration of the stat module by the OTRS administrator</title>

<para>
This section provides information about the tasks and possibilities of the
OTRS administrator dealing with the statistics module.
</para>

<section id="stats-permissions" >
<title>Permission settings, groups and queues</title>

<para>
No new queues and/or groups are created when the stat module is installed.
</para>

<para>
The default configuration of the module registration gives all agents with
"stats" group permissions access to the stats module.
</para>

<para>
Access according to permission settings:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
            <emphasis>rw</emphasis>.  Allows configurating statistics.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>ro</emphasis>.  Permits generating pre-configured statistics.
        </para>
    </listitem>
</itemizedlist>
</para>

<para>
The OTRS administrator decides whether agents with the permission to
generate pre-configured stats are allocated ro rights in the "stats" group,
or if their respective groups are added in the module registration in
SysConfig.
</para>
</section>

<section id="stats-sysconfig" >
<title>SysConfig</title>

<para>
SysConfig groups <link linkend="Framework:Core::Stats" >
Framework:Core::Stats </link> , <link linkend="Framework:Core::Stats::Graph"
> Framework:Core::Stats::Graph </link>and <link
linkend="Framework:Frontend::Agent::Stats" >
Framework:Frontend::Agent::Stats </link> contain all configuration
parameters for the basic set-up of the statistics module.  Moreover, the
configuration parameter <link
linkend="Framework:Frontend::Agent::ModuleRegistration:Frontend::Module_AgentStats"
> $Self-&gt;{'Frontend::Module'}-&gt;{'AgentStats'} </link> controls the
arrangement and registration of the modules and icons within the statistics
module.
</para>
</section>

</section>

<section id="stats-managing-the-stats-module-by-the-sysadmin" >
<title>Administration of the stats module by the system administrator</title>

<para>
Generally, no system administrator is needed for the operation,
configuration and maintenance of the statistics module. However, a little
background information for the system administrator is given at this point.
</para>

<note>
<para>
File paths refer to subdirectories of the OTRS home directory (in most
cases<filename>/opt/otrs</filename>).
</para>
</note>

<section id="stats-db-table" >
<title>Data base table</title>

<para>
All stat configurations are implemented and administrated in XML and,
therefore, stored in the database table "xml_storage". Other modules whose
content is presented in xml format use this table as well.
</para>

</section>

<section id="stats-filelist" >
<title>List of all files</title>

<para>
The following files are necessary for the stats module to work accurately:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
        <filename>Kernel/System/Stats.pm</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Modules/AgentStats.pm</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/System/CSV.pm</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsOverview.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsDelete.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsEditSpecification.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsEditRestrictions.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsEditXaxis.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsEditValueSeries.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsImport.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsPrint.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsView.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/System/Stats/Dynamic/Ticket.pm</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>bin/otrs.GenerateStats.pl</filename>
        </para>
    </listitem>
</itemizedlist>
</para>
</section>

<section id="stats-caching" >
<title>Caching</title>

<para>
Whether the results of a statistic are to be cached or not can be defined in
the pre-configuration. Cached statistic results are stored as files in the
<filename>var/tmp</filename>directory of the OTRS installation (in most
cases<filename>/opt/otrs/var/tmp</filename>).
</para>

<para>
Cached stats can be recognized by the "Stats" prefix.
</para>

<para>
If the data is lost, no major damage is caused. The next time the stat is
called up, the stats module will not find the file any more and thus, will
generate a new stat, which will probably take a little longer.
</para>
</section>

<section id="stats-mkstats" >
<title>otrs.GenerateStats.pl</title>

<para>
This file is saved in the <filename>bin/</filename>directory.  It
facilitates the generation of stats in the command line.
</para>

<para>
The command line call in the Script 19.1 is an exemplary.
</para>

<para>
<programlisting>
bin> perl otrs.GenerateStats.pl -n 10004 -o /output/dir
</programlisting>
</para>

<para>
    <emphasis>Script 19.1. Generating a stat via command line.</emphasis>
</para>

<para>
A stat from the stat configuration "Stat# 10004" is generated and saved as
csv in the <filename>/output/dir</filename>directory.
</para>

<para>
The generated stat can also be sent as an e-mail.  More information can be
called up with the command of the Script 19.2.
</para>

<para>
<programlisting>
bin> perl otrs.GenerateStats.pl --help
</programlisting>
</para>

<para>
    <emphasis>Script 19.2. Getting information about the otrs.GenerateStats.pl
file.</emphasis>
</para>

</section>

<section id="stats-cron" >
<title>Automated stat generation - Cronjob</title>

<para>
It obviously does not really make sense to generate stats manually in the
command line, as the stat module has a convenient graphical user
interface. However, generating stats manually does make sense when combined
with a Cronjob.
</para>

<para>
Imagine the following scenario: On every first day of the month the heads of
department want to receive a stat for the past month. By combining a cronjob
and command line call the stats can be sent to them automatically by e-mail.
</para>

</section>

<section id="stats-static" >
<title>Static stats</title>

<para>
The stats module facilitates the generation of static statistics. For every
static stat a file exists in which its content is precisely defined.
</para>

<para>
This way, very complex stats can be generated. The disadvantage is that they
are not particularly flexible.
</para>

<para>
The files are saved in the following directory
<filename>Kernel/System/Stats/Static/</filename>.
</para>
</section>

<section id="stats-using-old-stats" >
<title>Using old static stats</title>

<para>
Standard OTRS versions 1.3 and 2.0 already facilitated the generation of
stats.  Various stats for OTRS versions 1.3 and 2.0 which have been
specially developed to meet customers' requirements can be used in more
recent versions too.
</para>

<para>The files must merely be moved from the
<filename>Kernel/System/Stats/</filename> path to
<filename>Kernel/System/Stats/Static/</filename>. Additionally the package
name of the respective script must be amended by "::Static".
</para>

<para>
The following example shows how the first path is amended.
</para>

<para>
<programlisting>
    package Kernel::System::Stats::AccountedTime;
</programlisting>
</para>

<para>
<programlisting>
    package Kernel::System::Stats::Static::AccountedTime;
</programlisting>
</para>
</section>

<section id="stats-default-stats" >
<title>Default stats</title>

<para>"It is not always necessary to reinvent the wheel..."
</para>

<para>
The stats module provides various default stats. Stats which are interesting
for all OTRS users will in future be added to the default stats of the stats
module package. Default stats are saved in the stats module xml format in
the<filename>scripts/test/sample/</filename> directory.
</para>

</section>

</section>

</chapter>
