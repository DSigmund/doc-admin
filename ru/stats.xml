<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">


<!-- $Id: stats.xml,v 1.9 2011-03-02 13:51:33 mg Exp $ -->
<chapter id="statistic-module">
<title>Stats-модуль</title>

<para>
Статистика и отчеты необходимы компаниям. На основе статистики, информация
может быть оценена что может дать толчек для обоснованых решений в будущем.
</para>

<para>
Модуль статистики должен удовлетворять множество требований:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
        Должны быть определены и взяты во внимание различные модули OTRS.
        </para>
    </listitem>
    <listitem>
        <para>
        Взяты во внимание права доступа пользователей для соответствующей установки.
        </para>
    </listitem>
    <listitem>
        <para>
        Создание сложной статистики.
        </para>
    </listitem>
    <listitem>
        <para>
        Простая и быстрая настройка статистики.
        </para>
    </listitem>
    <listitem>
        <para>
        Высокая производительность.
        </para>
    </listitem>
    <listitem>
        <para>
        Поддержка большого числа способов вывода.
        </para>
    </listitem>
</itemizedlist>
</para>

<para>
Модуль статистики OTRS старается удовлетворить всем этим
требованиям. Основной особеностью является графический интерфейс, который
позволяет настроить статистику несколькими щелчками мыши.
</para>

<para>
Статистические элементы, такие как например файлы, которые дополняют
функциональные возможности модуля статистики для конкретых требований, могут
быть интегрированы для моделирования сложной статистики.
</para>

<para>
Все требования, касающиеся оценки личных данных были рассмотрены. Это,
например, нету возмжности напрямую вычислить активность отдельных агентов в
стандартной конфигурации.
</para>

<para>
Модуль статистики OTRS позволяет пользователям быстро и легко сделать оценку
активности их системы.
</para>

<section id="stats-usage" >
<title>Обработка модуля агентом</title>

<para>
Как только модуль статистики установлен и успешно настроен
OTRS-администратором, то для каждого агента, который имеет права для чтения
и/или записи, в навигационной панели отображается дополнительнаяя ссылка на
модуль "Статистика", который имеет ссылки на различные действия, как
показано на Рисунке 19.1.
</para>

<para>
<screenshot>
<screeninfo>Модуль статистики</screeninfo> <graphic
fileref="screenshots/stats-menu.png" scale="40" srccredit="stats-menu -
Screenshot" /></screenshot>
</para>

<para>
    <emphasis>Рисунок 19.1. Список действий для статистики. </emphasis>
</para>

<para>
Различные варианты представленные в меню статистики:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
            <emphasis>Обзор</emphasis>. Автоматически отображается если ссылка на модуль
"Статистика" закрыта.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Новая</emphasis>. Требуются права rw.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Импорт</emphasis>. Требуются rw-права.
        </para>
    </listitem>
</itemizedlist>
</para>

<section id="stats-overview" >
<title>Обзор</title>

<para>
Список всех предварительных настроек, которые может использовать агент
(см. ниже Рисунок 19.2).
</para>

<para>
Самый простой способ доступа к просмотру - это выбрать ссылку "Статистика",
а затем ссылку "Обзор" в панели навигации. Обзор статистики вызывается
автоматически, когда модуль "Статисткика" закрыт в навигационной панели.
</para>

<para>
<screenshot>
<screeninfo>Обзор стандартной статистики</screeninfo> <graphic
fileref="screenshots/stats-overview.png" scale="40"
srccredit="stats-overview - Screenshot" /></screenshot>
</para>

<para>
    <emphasis>Рисунок 19.2. Обзор стандартной статистики.</emphasis>
</para>

<para>
В обзоре приведена следующая информация о статистике:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
            <emphasis>Stat#</emphasis>. Уникальный номер.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Заголовок</emphasis>. Заголовок статистики.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Объект</emphasis>. Объект использующийся для генерации
статистики. В случае статической статистики, не отображается ниодин обьект,
поскольку динамические обьекты не используются для создания статистики.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>Описание</emphasis>. Выдержка из описания статистики.
        </para>
    </listitem>
</itemizedlist>
</para>

<para>
Ниже под списком статистики отображаются результаты, которые предоставляют
информацию о количестве доступной статистики. Если их количество превышает
одну страницу, то агнент может перемещатся между разными страницами.
</para>

<para>
Агенты не имеют возможности сотрировать статистику по возрастанию или
убыванию в соответствии с их потребностями, просто нажав на соответствующие
ключевые слова в заголовке.
</para>

<para>
Для генерации статистики, правильно выбрать один нажав ссылку с номером
статистики, что приведет к переходу на страницу "Просмотр" пользовательского
интерфейса.
</para>

<para>
Несколько образцов статистики импортируется когда модуль статистики
используется впервые.
</para>

</section>

<section id="stats-viewing-generating">
<title>Создание и просмотрт статистики</title>

<para>
Интерфейс просмотра пользователей должен предоставлять агенту обзор
предварительной конфигурации (см. ниже Рисунок 19.3).
</para>

<para>
<screenshot id="stats-view-screenshot" >
<screeninfo>Просмотр статистики</screeninfo> <graphic
fileref="screenshots/stats-view.png" scale="40" srccredit="stats-view -
Screenshot" /></screenshot>
</para>

<para>
    <emphasis>Рисунок 19.3. Просмотр конкретной статистики.</emphasis>
</para>

<para>
Агенты могут выполнять настройку в диапазоне предварительной
конфигурации. Создатель конфигурации статистики может определить степень, в
которой можножно влиять на статистику. Самым экстремальным примером этого
могут быть агенты, которые не могут повлиять на любые изменения или могут
изменить все атрибуты, соответственно.
</para>

<para>
На странице отображается следующее:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
        Возможные действия:
        </para>

        <para>
        <itemizedlist>
            <listitem>
                <para>
                    <emphasis>Перейти к обзору</emphasis>. Ссылка обратно, в начальную точку.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Редактировать</emphasis>. Редактировать текущую статистику
(требуются права для чтения и записи, RW).
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Удалить</emphasis>.  Удалить текущую статистику(требуются права
для чтения/записи, rw).
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Экспортировать настройки</emphasis>.  Экспортировать настройки
конфигурации, скачать их (требуются права для чтения и записи, rw).
                </para>

                <para>
                    Использование: экспорт и импорт функций позволяют с легкостью создавать и
тестировать статистику та тестовых системах и их последующую интеграцию в
производственную систему.
                </para>
            </listitem>
        </itemizedlist>
        </para>
    </listitem>
    <listitem>
        <para>
        Подробные данные о статистике:
        </para>
        <para>
        <itemizedlist>
            <listitem>
                <para>
                    <emphasis>Stat#</emphasis>.  Номер статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Заголовок</emphasis>. Заголовок статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Объект</emphasis>. Объект, используемый для создания статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Описание</emphasis>. Обеспечивает более подробную информацию о
назначении статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Формат</emphasis>. Выходной формат статистики. В зависимости от
конфигурации, может быть выбран любой из следующих форматов:
                </para>
                <para>
                <itemizedlist>
                    <listitem>
                        <para>
                        CSV.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Печать.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Графические линии.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Столбцовая диаграмма.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Диаграмма.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Точечная диаграмма.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Точечно-линейная диаграмма.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Диаграмма
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                        Круговая "пирожок"-диаграмма.
                        </para>
                    </listitem>
                </itemizedlist>
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Размер в пикселях</emphasis>. Размер (в пикселях) который может
иметь график/диаграмма. Эта опция доступна только в том случае, если
доступна предварительная настройка для графиков. Все основные и часто
используемые графические размеры настраиваются в панели управления OTRS в
SysConfig. Агент может выбрать все предварительно доступные форматы во время
настройки статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Сумма строк</emphasis>. Указывает когда статистика не помещается в
выделенную колонку, ячейки которой содержат соответствующие строки.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Sum columns</emphasis>.  Indicates whether the stat is amended by
a row, whose cells state the sum of the respective columns.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Кэш</emphasis>. Указывается когда созданная статистика кэшируется
в файловой системе.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Правильный</emphasis>. Устанавливается в значение "invalid" если
предварительно настроенная статистика по прежнему остается или не может быть
использована временно по определенным причинам. Также кнопка "Статистика"  в
правом нижнем углу блока не отображатеся. Статистика не может больше
отображатся.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Создана</emphasis>.  Время создания статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Создана (кем)</emphasis>. Агент, который создал эту статистику.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Изменена</emphasis>. Время последней модификации статистики.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>Изменена кем</emphasis>. Агент, который внес изменения в
статистику.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis>X-axis</emphasis>. Используя эту функцию, агент может
обмениватсься x и y axes (только если эта функциональность активирована
OTRS-администратором).
                </para>
            </listitem>
            <listitem>
                <para>
                Общая информация сопровождается информацией о самой статистике. Доступны два
различных шаблона просмотра:
                </para>
                <para>
                <itemizedlist>
                    <listitem>
                        <para>
                            <emphasis>Статический шаблон для просмотра статистики</emphasis>.  Сложная
статистика не может быть сгенерирована динамически, "на-лету", это и
является главной причиной, почему статистические генераторы не могут быть
интегрированы в модуль статистики (см. ниже Рисунок 19.4). Они были
разработаны специально для конкретной оценки. Различные задания для
различных шаблонов.
                        </para>
                        <para>
                        <screenshot>
<screeninfo>Статические шаблоны для просмотра статистики</screeninfo> <graphic
fileref="screenshots/stats-view-static.png" scale="40"
srccredit="stats-view-static - Screenshot" /></screenshot>
                        </para>
                        <para>
                            <emphasis>Рисунок 19.4. Просмотр статической статистики.</emphasis>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <emphasis>Шаблон для просмотра динамической статистики</emphasis> (см. ниже
Рисунок 19.3 ).  Они не могут отображатся двумя различными способами:
                        </para>
                        <para>
                        <itemizedlist>
                            <listitem>
                                <para>
                                    <emphasis>Неизменяемые настройки</emphasis>. Создатель статистики не имеет
разрешения на изменения этого поля.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    <emphasis>Изменяемые настройки</emphasis>. Предварительная конфигурация
такой статистики может быть изменена агентом.
                                </para>
                            </listitem>
                        </itemizedlist>
                        </para>
                    </listitem>
                </itemizedlist>
                </para>
            </listitem>
        </itemizedlist>
        </para>
    </listitem>
</itemizedlist>
</para>

<para>
При нажатии кнопки "Пуск" (в нижней части экрана) является последним, самым
простым шагом для создания статистики. Есть две возможные причины, что эта
кнопка не отображается:
</para>

<para>
<orderedlist numeration="arabic" >
    <listitem>
        <para>
        Статистика была установлена как недействительная и отключена.
        </para>
    </listitem>
    <listitem>
        <para>
        Статистика была настроена не аккуратно и, следовательно, не может
выполнятся. В этом случае необходимую информацию можно найти в разделе
уведомления системы OTRS (под навигационной панелью).
        </para>
    </listitem>
</orderedlist>
</para>

<para>
Если настройки страницы просмотра неверны, эта страница отображается опять,
после нажатия кнопки "Пуск", и информация о том что шаблон настроен не
правильно будет отображатся в разделе уведомлений.
</para>
</section>

<section id="stats-modify-new">
<title>Редактировать - Новая</title>

<para>
Агенты, которые имеют права на запись могут редактировать существующую
конфигурацию статистики, вызвав пользовательский веб-интерфейс для
редактирования модуля статистики. Для этого есть два возможных варианта
действий:
</para>

<para>
<orderedlist numeration="arabic">
<listitem>
    <para>
    Используя кнопку "Редактировать" в шаблоне просмотра статистики.
    </para>
</listitem>
<listitem>
    <para>
    Используя ссылку "Новая" в меню модуля Статистика в навигационной панели.
    </para>
</listitem>
</orderedlist>
</para>

<para>
Статистика редактируется с помощью мастера в четыре этапа:
</para>

<para>
<orderedlist numeration="arabic">
<listitem>
    <para>
    Общие технические условия.
    </para>
</listitem>
<listitem>
    <para>
    Определение элементов для X-axis.
    </para>
</listitem>
<listitem>
    <para>
    Спецификация значений ряда.
    </para>
</listitem>
<listitem>
    <para>
    Определение для ограничений характеристики статистики.
    </para>
</listitem>
</orderedlist>
</para>

<para>
Пункты 2-4 требуются только для создания динамической статистики. Для
статической статистики, нужна только общая информация (пункт 1).
</para>

<para>
Информация о том, как обрабатывать страницы приводится ниже формы ввода, на
всех интерфейсах пользователя модуля статистики.
</para>

<para>
Если введены неправильные данные, ранее обработанный пользовательский
интерфейс отображатеся снова, на этот раз уже с информацией о неправильных
входных данных. Эта информация может быть найдена в разделе уведомлений
OTRS. Следующий пользовательский веб-интерфейс для ввода отображатеся только
в том случае, если все поля формы заполнены правильно.
</para>

<para>
<orderedlist numeration="arabic" >
<listitem>
    <para>
        <emphasis>Общие технические условия</emphasis>.  Это первая страница мастера
(см. ниже Рисунок 19.5).
    </para>

    <para>
    <screenshot>
<screeninfo>Общие характеристики статистики</screeninfo> <graphic
fileref="screenshots/stats-edit-general.png" scale="40"
srccredit="stats-edit-general - Screenshot" /></screenshot>
    </para>

    <para>
        <emphasis>Рисунок 19.5. Редактирование общей информации о
статистике</emphasis>
    </para>


    <para>
        На странице приведенной на Рисунке 19.5 есть большое количество общих
спецификаций и настроек, которые можно изменить:
    </para>

    <para>
    <itemizedlist>
        <listitem>
            <para>
                <emphasis>Заголовок</emphasis>. Должны отражать назначение (цель) статистики
в сжатой форме.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Описание</emphasis>. Более подробная информация о работе, типы
конфигурационных параметров и т.д.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Динамический объект</emphasis>.  Если установка OTRS предоставляет
различные динамические объекты, один из них может быть выбран. Объекты
отвечают требованиям отдельных модулей.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Статический файл</emphasis>. Обычно эта возможность не
отображается, как только статические файлы, которые не назначены любой
статистике отображаются. Если "Статический файл" отображается, позже, очень
важно поставить галочку в поле и выбрать режим генерации (динамический с
динамический объектом или статический с файлом). Если выбран статический
файл, пользовательский веб-интерфейс 2-4 не отображается как статический
файл и содержит все необходимые настройки.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Настройки доступа</emphasis>. Содействие ограничению групп (и,
следовательно, агентов), которые можно позже просматривать и генерировать
предварительную статистику. Таким образом, различная статистика может быть
выделена для различных отделов и рабочих групп, которые в них
нуждаются. Можно выделить одину статистику для различных групп.
            </para>

            <para>
                Пример 1: группа "статистика" выбрана. Статистика доступна для просмотра для
всех пользователей, имеющие права, по крайней мере, для группы
"статистика". В качестве основного требования для доступа в режиме просмотра
к модулю статистики с настройками по умолчанию, все пользователи, с правами
для создания статистики могут просматривать эту конфигурацию.
            </para>

            <para>
                Пример 2: Была выбрана группа под названием "продажи". Все пользователи,
имеющие права ro (read only) могут выдеть статистику в режиме просмотра э
генерировать ее. Однако, статистика не будет показываться другим
пользователям, имеющим права для создания статистики.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Формат</emphasis>. Формат отображения для статистики. В
зависимости от конфигурации, могут быть выбраны один или несколько форматов:
            </para>

            <para>
            <itemizedlist>
                <listitem>
                    <para>
                        CSV.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Печать.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-lines.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-bars.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-hbars.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-points.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-lines-points.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-area.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        graph-pie.
                    </para>
                </listitem>
            </itemizedlist>
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Размер графика</emphasis>. Выберите размер (в пикселях)
диаграммы. Этот выбор необходим только в том случае, если графический формат
вывода был выбран в поле "Формат". Все графические размеры, которые могут
быть использованы определяются в OTRS в SysConfig. При настройке статистики,
агент может предварительно выбрать все соответствующие форматы.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Количество </emphasis>. Указывает когда статистика будет разбита
на колонки, когда колонки содержат сумму соответствующих строк.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Сумма столбцов</emphasis>.  Указывает когда ячейки содержат
соответствующее количество строк в соответсвтующей колонке.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Кэш</emphasis>. Указывает если созданная статистика должна
сохранятся в файловой системе. Это позволяет существенно экономить
вычислительные мощности и время, но это должно быть использовано только в
том случае если содержание статистики не будет больше изменятся.
            </para>

            <para>
                Кэширование автоматически предотвращается, если статистика не содержит
значение времени (новые данные постоянно добавляются), или если указывается
время из будущего.
            </para>

            <para>
                Если закэшированная статистика редактируется, все кэшированные данные будут
удалены.
            </para>
        </listitem>
        <listitem>
            <para>
                <emphasis>Действительный</emphasis>.  Это установлено в "недействительно"
если предварительно сконфигурированная статистика создана и не должна
использоватся времено с тех или иных причин. Также кнопка "Старт" в правом
нижнем углу блока больше не отображается. Теперь невозможно создать
статистику.
            </para>
        </listitem>
    </itemizedlist>
    </para>
</listitem>
<listitem>
    <para>
        <emphasis>Определение элементов для X-axis</emphasis>. Этот элемент
конфигурации используется для изображения X-axis-осей, или, если
используются таблицы, в столбце имя, выбранное для статистики (см. ниже
Рисунок 19.6).
    </para>

    <para>
    <screenshot>
<screeninfo>Определение элементов для X-axis.</screeninfo> <graphic
fileref="screenshots/stats-edit-xaxis.png" scale="40"
srccredit="stats-edit-xaxis - Screenshot" /></screenshot>
    </para>

    <para>
        <emphasis>Рисунок 19.6. Определение элементов для X-axis.</emphasis>
    </para>

    <para>
    Во-первых, элемент выбирается с помощью опционального поля. Потом два или
более атрибутов элемента должно быть выбрано. Если нет выбраных атрибутов,
используются все атрибуты, в том числе и те, которые были добавлены после
конфигурации статистики.
    </para>

    <para>
    Если "Основные" настройки отключены, агент, генерирующий статистику может
изменить атрибуты соответствующих элементов в меню "Вид" пользовательского
веб-интерфейса.
    </para>

    <para>
    Элементы времени которые отличаются как периоды времени  должны быть
указаны. Тип и количество элементов результата от используемого
динамического объекта зависит от него.
    </para>

    <para>
    Если все входные данные введены правильно, нажатие кнопки "Следующий шакг"
приводит к форме "Соотношение серии". Кроме этого, можно снова вернуться к
редактированию  раздела "общие заявления".
    </para>
</listitem>
<listitem>
    <para>
        <emphasis>Спецификация серии значений</emphasis>.
    </para>

    <para>
    На третьем шаге предварительной конфигурации статистики серия значений
определена (см. ниже Рисунок 19.7). Они будут позже в форме на отдельном
графике диаграммы для различных серий (в табличном виде).
    </para>

    <para>
    <screenshot>
<screeninfo>Определение значений серии</screeninfo> <graphic
fileref="screenshots/stats-edit-valueseries.png" scale="40"
srccredit="stats-edit-valueseries - Screenshot" /></screenshot>
    </para>

    <para>
        <emphasis>Рисунок 19.7. Определение значений серии.</emphasis>
    </para>

    <para>
    Если выбран определенный элемент, каждый выбранный атрибут будет
соответствовать значеню серии (см. ниже Пример 19-1).
    </para>

    <para>
    <example id="stats-value-series-1">
    <title>Определение значения серии - один из элементов</title>

    <para>
    Элемент Очередь:
    </para>

    <para>
    <itemizedlist>
        <listitem>
            <para>
            Серия значений 1 = Raw
            </para>
        </listitem>
        <listitem>
            <para>
            Значение серии 2 = Junk
            </para>
        </listitem>
        <listitem>
            <para>
            ....
            </para>
        </listitem>
    </itemizedlist>
    </para>
    </example>
    </para>

    <para>
    Если выбрано два элемента, каждый выбраный атрибут первого элемента в
сочетании с атрибутом второго элемента в форме значения ряда (см. ниже
Рисунок 19-2).
    </para>

    <para>
    <example id="stats-value-series-2" >
    <title>Определение значения серии - один из элементов </title>

    <para>
    Элемент 1 очередь и элемент 2 статус:
    </para>

    <para>
    <itemizedlist>
        <listitem>
            <para>
            Значение создания 1 = Raw - открыть
            </para>
        </listitem>
        <listitem>
            <para>
            Серия значений 2 = Raw - успешно закрыта
            </para>
        </listitem>
        <listitem>
            <para>
            Серия значений 3 = Junk - открыто
            </para>
        </listitem>
        <listitem>
            <para>
            Серия значений 4 = Junk - успешно закрыто
            </para>
        </listitem>
    </itemizedlist>
    </para>
    </example>
    </para>

    <para>
    Выбор из трех или более элементов не имеет смысла и, следовательно,
предотвращает появление сообщения об ошибке.
    </para>

    <para>
    Кроме этого эти условия распостраняются и на выбор атрибутов и флажок
"Основные" как для "X-axis":
    </para>

    <para>
    <itemizedlist>
        <listitem>
            <para>
            Если не выбрано никаких элементов атрибутов и используются все атрибуты, в
том числе и те, которые добавлены после конфигурации статистики.
            </para>
        </listitem>
        <listitem>
            <para>
            Если отключен параметр "Основные", агент генерирующий статистику может
изменять атрибуты соответствующих элементов.
            </para>
        </listitem>
    </itemizedlist>
    </para>
</listitem>
<listitem>
    <para>
        <emphasis>Определение ограничений  для характеристики
статистики</emphasis>. Это четвертый и последний этап предварительной
конфигурации (см. ниже Рисунок 19.8). Ограничения способствуют тому, чтобы
ограничить результаты и сопоставить их с выводом данных в окне поиска. В
целом ряде случаев, без ограничений должны быть созданы для всех.
    </para>

    <para>
    <screenshot>
<screeninfo>Определение ограничений</screeninfo> <graphic
fileref="screenshots/stats-edit-restrictions.png" scale="40"
srccredit="stats-edit-restrictions - Screenshot" /></screenshot>
    </para>

    <para>
        <emphasis>Рисунок 19.8. Определение ограничений.</emphasis>
    </para>

    <para>
    После того, как все ограничения установлены, предварительная конфигурация
считается законченной, можно нажать кнопку "Готово" и "Вид" чтобы перейти в
пользовательский веб-интерфейс.
    </para>
</listitem>
</orderedlist>
</para>
</section>

<section id="stats-import">
<title>Импорт</title>

<para>
Пользовательский веб-интерфейс импорта (см. ниже Рисунок 19.9) может быть
вызван, выбрав "Импорт" в навигационной панели (требуются права RW).
</para>

<para>
<screenshot>
<screeninfo>Интерфейс импорта пользователей</screeninfo> <graphic
fileref="screenshots/stats-import.png" scale="40" srccredit="stats-import -
Screenshot" /></screenshot>
</para>

<para>
    <emphasis>Рисунок 19.9. Интерфейс импорта пользователей.</emphasis>
</para>

<para>
Облегчает импорт статистики, в сочетании с функцией модуля экспорта, очень
удобная функция. Статистика может быть создана и протестирована на тестовых
системах, а затем импортирована в реальную систему.
</para>

<para>
Импорт осуществляется легко с помощью загрузки файла. После этого
автоматически открывается пользовательский интерфейс для импорта статистики.
</para>
</section>

</section>

<section id="stats-managing-the-module">
<title>Администрирование модуля статистики OTRS-администратором.</title>

<para>
В этом разделе содержится информация о задачах и возможностях доступных
OTRS-администратору, который работает с модулем статистики.
</para>

<section id="stats-permissions" >
<title>Настройки доступов, групп и ролей</title>

<para>
Нет новых очередей и/или групп, которые создаются при установке модуля
статистики.
</para>

<para>
В конфигурации по умолчанию модуль регистрации дает всем агентам группы
"статистика" права доступа к модулю статистики.
</para>

<para>
Доступ в соответствии с разрешенными настройками:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
            <emphasis>rw</emphasis>.  Разрешает конфигурацию статистики.
        </para>
    </listitem>
    <listitem>
        <para>
            <emphasis>ro</emphasis>.  Разрешение для генерации предварительно настроеной
статистики.
        </para>
    </listitem>
</itemizedlist>
</para>

<para>
OTRS-администратор определяте когда агенты с правами для генерации
предварительно настроеной статистики выделяются в ro-права для группы
"статистика", или если их соответствующие группы добавляются в модуль
регистрации в SysConfig.
</para>
</section>

<section id="stats-sysconfig" >
<title>SysConfig</title>

<para>
SysConfig группы <link linkend="Framework:Core::Stats" >
Framework:Core::Stats </link> , <link linkend="Framework:Core::Stats::Graph"
> Framework:Core::Stats::Graph </link>and <link
linkend="Framework:Frontend::Agent::Stats" >
Framework:Frontend::Agent::Stats </link> содержат все параметры конфигурации
для базового набота из модуля статистики.  Больше того, параметры
конфигурации <link
linkend="Framework:Frontend::Agent::ModuleRegistration:Frontend::Module_AgentStats"
> $Self-&gt;{'Frontend::Module'}-&gt;{'AgentStats'} </link> управляют
организацией и регистрацией модулеи и иконкой в модуле статистики.
</para>
</section>

</section>

<section id="stats-managing-the-stats-module-by-the-sysadmin" >
<title>Администрирование модуля статистики системным администратором</title>

<para>
Как правило, системного администратора не требуется для эксплуатации,
настройки и обслуживания модуля статистики. Однако, немного справочной
информации дано для системного администартора в этой точке.
</para>

<note>
<para>
Пути к файлам см. в подкаталогах домашнего каталога OTRS (в большинстве
случаев <filename>/opt/otrs</filename>).
</para>
</note>

<section id="stats-db-table" >
<title>Таблица базы данных</title>

<para>
Все параметры конфигурации статистики включены и управляются в XML и,
следовательно, хранятся в таблице базы данных "xml_storage". Другие модули,
содержание которых представлено в формате xml используют эту таблицу.
</para>

</section>

<section id="stats-filelist" >
<title>Список файлов</title>

<para>
Следующие файлы необходимы для коректной работы модуля статистики:
</para>

<para>
<itemizedlist>
    <listitem>
        <para>
        <filename>Kernel/System/Stats.pm</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Modules/AgentStats.pm</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/System/CSV.pm</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsOverview.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsDelete.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsEditSpecification.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsEditRestrictions.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsEditXaxis.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsEditValueSeries.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsImport.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsPrint.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/Output/HTML/Standard/AgentStatsView.dtl</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>Kernel/System/Stats/Dynamic/Ticket.pm</filename>
        </para>
    </listitem>
    <listitem>
        <para>
        <filename>bin/otrs.GenerateStats.pl</filename>
        </para>
    </listitem>
</itemizedlist>
</para>
</section>

<section id="stats-caching" >
<title>Кэширование</title>

<para>
В случае, если рерультаты статистики должны быть кэшированы или не могут
быть определены в предварительной конфигурации. Кэшированые результаты
статистики хранятся в файлах <filename>var/tmp</filename> в директории
установленной системы OTRS (в большинстве случаев
<filename>/opt/otrs/var/tmp</filename>).
</para>

<para>
Кэшированная статистика может быть распознана с помощью префикса "Stats".
</para>

<para>
Если данные будут потеряны, то серьезный ущерб не будет причинен всей
системе. В следующий раз, когда вызовется модуль статистики и не обнаружит
файла с статистикой, он будет генерировать новый отчет, который, возможно,
займет чуть больше времени.
</para>
</section>

<section id="stats-mkstats" >
<title>otrs.GenerateStats.pl</title>

<para>
Этот файл хранится в директории<filename>bin/</filename>.  Он позволяет
генерировать статистику прямо из командрной строки.
</para>

<para>
Командная строка вызывается в Сценарии 19.1 как пример.
</para>

<para>
<programlisting>
bin> perl otrs.GenerateStats.pl -n 10004 -o /output/dir
</programlisting>
</para>

<para>
    <emphasis>Сценарий 19.1. Создание статистики через командную
строку</emphasis>
</para>

<para>
Статистика из конфигурации статистики "Stat# 10004" генерируется и хранится
в csv-формате в директории <filename>/output/dir</filename>.
</para>

<para>
Сгенерированная статистика может также быть передана по электронной
почте. Более подробную информацию можно получить выполнив команду из
Сценария 19.2.
</para>

<para>
<programlisting>
bin> perl otrs.GenerateStats.pl --help
</programlisting>
</para>

<para>
    <emphasis>Сценарий 19.2. Получение информации о файле
otrs.GenerateStats.pl.</emphasis>
</para>

</section>

<section id="stats-cron" >
<title>Автоматическое создание статистики с помощью планировщика заданий - Cronjob</title>

<para>
Очевидно, что действительно нету необходимости генерировать статистику
вручную, из командной строки, так как модудь статистики имеет удобный
графический веб-интерфейс пользователя. Однако, создание статистики вручную
имеет смысл в сочетании с Cronjob.
</para>

<para>
Представьте себе следующую ситуацию: На каждый первый день месяца,
руководители отделов хотят получать статистику за последний месяц. Объединив
Cronjob с командой в строке вызова, статистика может быть отправлена им
автоматически по электронной почте.
</para>

</section>

<section id="stats-static" >
<title>Статическая статистика</title>

<para>
Модуль статистики облегчает генерацию статической статистики. Для каждой
статической статистики создается отдельный файл, в котором точто определено
его содержание.
</para>

<para>
Таким образом может быть сгенерирована очень сложная статистика. Главным
недостатком является то, что этот способ есть не очень гибким.
</para>

<para>
Файлы хранятся в следующей директории
<filename>Kernel/System/Stats/Static/</filename>.
</para>
</section>

<section id="stats-using-old-stats" >
<title>Использование устаревших данных статической статистики</title>

<para>
Стандартные версии OTRS 1.3 и 2.0 уже способствовали созданию
статистки. Различные варианты статистики для OTRS версии 1.3 и 2.0 которые
были специально разработаны для удовлетворения потребностей клиентов могут
быть использованы в более позних версиях.
</para>

<para>Файлы должны быть просто перемещены из
<filename>Kernel/System/Stats/</filename> в
<filename>Kernel/System/Stats/Static/</filename>. Кроме этого имя пакета
соответствующего сценария должен быть заменен на "::Static".
</para>

<para>
В следующем примере показано как изменяется первый путь.
</para>

<para>
<programlisting>
    package Kernel::System::Stats::AccountedTime;
</programlisting>
</para>

<para>
<programlisting>
    package Kernel::System::Stats::Static::AccountedTime;
</programlisting>
</para>
</section>

<section id="stats-default-stats" >
<title>Статистика по умолчанию</title>

<para>"Не всегда нужно изобретать велосипед..."
</para>

<para>
Модуль статистики предоставляет различные варианты статистики. Статистика,
которая может заинтересовать всех пользователей OTRS может быть добавлена в
будущем к статистике по умолчанию модуля статистики. Статистика по умолчанию
хранится в модуле статистики в xml-формате в директории
<filename>scripts/test/sample/</filename>.
</para>

</section>

</section>

</chapter>
