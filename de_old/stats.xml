<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<!-- $Id: stats.xml,v 1.1 2010-12-01 10:43:32 mg Exp $ -->

<chapter id='statistic-module'>
<title>Statistikmodul</title>

<para>
Statistiken und Reports sind für Unternehmen existenziell.
An Hand der Statistiken können Informationen ausgewertet, beurteilt
und zu guter letzt fundiert Entscheidungen getroffen werden.
</para>

<para>
Die Anforderungen an ein Statistikmodul sind vielfältig.
</para>

<para>
<itemizedlist>
<listitem>
    <para>
    es müssen verschiedene OTRS-Module ausgewertet werden können,
    </para>
</listitem>
<listitem>
    <para>
    es muss dem Rechtekonzept der jeweiligen Installation Rechnung
    getragen werden,
    </para>
</listitem>
<listitem>
    <para>
    komplexe Statistiken müssen generiert werden können,
    </para>
</listitem>
<listitem>
    <para>
    die Konfiguration einer Statistik muss schnell und einfach
    durchführbar sein,
    </para>
</listitem>
<listitem>
    <para>
    eine hohe Performance muss gegeben sein,
    </para>
</listitem>
<listitem>
    <para>
    verschiedene Ausgabevarianten müssen unterstützt werden.
    </para>
</listitem>
</itemizedlist>
</para>

<para>
Das Statistikmodul versucht diese Anforderungen zu vereinigen.
Kern des Ganzen ist dabei eine grafische Benutzeroberfläche,
durch die sich Statistiken per Mausklick konfigurieren lassen.
</para>

<para>
Um komplexe Statistiken abzubilden, besteht ferner die Möglichkeit
statische Elemente zu integrieren (Dateien die die Funktionalität
des Statistik-Moduls um ganz spezifische Anforderungen ergänzen).
</para>

<para>
Hinzu kommt, dass Anforderungen zum Thema
"Auswertung personenbezogener Daten" berücksichtigt werden, so ist
es z. B. in der Standardkonfiguration nicht möglich, direkt Auswertungen über
die Aktivitäten einzelner Agents zu erstellen.
</para>

<para>
Alles in allem ermöglicht das Statistik-Modul OTRS-Anwendern
schnell und unproblematisch die Auswertung der Aktivitäten auf ihrem
System.
</para>

<sect1 id='stats-usage'>
<title>Bedienung des Moduls durch den Agent</title>

<para>
Wurde das Statistik-Modul erfolgreich durch den OTRS-Admin
installiert und konfiguriert,  erhält jeder Agent mit Schreib-
oder/und Leserechten den zusätzlichen Modullink "Statistiken"
in der Navigationsleiste.
</para>

<para>
<screenshot>
<screeninfo>Das Statistikmodul</screeninfo>
<graphic srccredit="stats-icon - Screenshot" scale="40" fileref="screenshots/stats-icon.png"></graphic>
</screenshot>
</para>

<para>
Ferner werden nach der Auswahl des Links verschiedene Aktionslinks
für das Statistikmodul in der Navigationsleiste angezeigt.
</para>

<para>
<itemizedlist>
<listitem>
    <para>
    "Übersicht"
    </para>

    <para>
    wird auch automatisch nach der Auswahl des Modullinks
    "Statistiken" angezeigt
    </para>
</listitem>
<listitem>
    <para>
    "Neu"
    </para>

    <para>
    rw-Rechte erforderlich
    </para>
</listitem>
<listitem>
    <para>
    "Import"
    </para>

    <para>
    rw-Rechte erforderlich
    </para>
</listitem>
<listitem>
    <para>
    "Einstellungen"
    </para>

    <para>
    Oberfläche für persönliche Einstellungen in OTRS
    </para>
</listitem>
</itemizedlist>
</para>

<sect2 id='stats-overview'>
<title>Übersicht</title>

<para>
Hierbei handelt es sich um die Auflistung aller vorkonfigurierten
Statistiken, die der Agent benutzen darf.
</para>

<para>
Zur Übersicht gelangt man am besten durch die Auswahl des
Aktionslinks "Übersicht" in der Navigationsleiste, wenn zuvor der
Link "Statistik" ausgewählt wurde. Ferner gelangt man automatisch zur
Übersicht des Statistik-Moduls, wenn man den Modullink "Statistik"
in der Navigationsleiste folgt.
</para>

<para>
<screenshot>
<screeninfo>Übersicht mit den Standardstatistiken</screeninfo>
<graphic srccredit="stats-overview - Screenshot" scale="40" fileref="screenshots/stats-overview.png"></graphic>
</screenshot>
</para>

<para>
Folgende Informationen sind den in der Übersicht aufgelisteten
Statistiken zu entnehmen:
</para>

<para>
<itemizedlist>
<listitem>
    <para>
    "Stat\#"
    </para>

    <para>
    die eindeutige Statistiknummer
    </para>
</listitem>
<listitem>
    <para>
    "Titel"
    </para>

    <para>
    der Titel der Statistik
    </para>
</listitem>
<listitem>
    <para>
    "Objekt"
    </para>

    <para>
    Objekt, das für die Generierung der Statistik verwendet wird.
    Wenn es sich um eine statische Statistik handelt,
    wird kein Objekt angezeigt, da kein dynamisches
    Objekt zur Generierung verwendet wird.
    </para>
</listitem>
<listitem>
    <para>
    "Beschreibung"
    </para>

    <para>
    Ein Auszug aus der Beschreibung
    </para>
</listitem>
</itemizedlist>
</para>

<para>
Oberhalb der Auflistung befindet sich eine Ergebnisanzeige. Sie
gibt Auskunft über die Anzahl der zugänglichen Statistiken. Bei
mehrseitigen Auflistungen kann der Agent in den einzelnen
Übersichtsseiten blättern.
</para>

<para>
Die blauen "Auf"- und "Ab"-Icons in der Benamungszeile ermöglichen
dem Agent eine Sortierung der Statistiken nach eigenen Bedürfnissen.
</para>

<para>
Will man nun eine Statistik generieren, wählt man einfach die
gewünschte Statistik aus, indem man den Link der Statistiknummer
folgt. Anschließend gelangt man in die Oberfläche "Ansehen".
</para>

<para>
Wird das Statistik-Modul initial verwendet, werden sofort einige
Musterstatistiken importiert.
</para>
</sect2>

<sect2 id='stats-viewing-generating'>
<title>Ansehen und Generieren von Statistiken</title>

<para>
Aufgabe der "Ansehen"-Oberfläche ist es, dem Agent einen Überblick
über die Vorkonfiguration der Statistik zu ermöglichen.
</para>

<para>
Ferner kann der Agent im Rahmen der vorkonfigurierten Möglichkeiten
weitere Konfigurationen vornehmen. D. h. der Ersteller einer
Statistikkonfiguration kann bei der Definition der Statistik
festlegen, inwieweit die eigentliche Generierung der Statistik
noch beeinflusst werden kann. Im Extremfall bedeutet dies, dass
der Agent gar keine Veränderung mehr vornehmen kann oder im anderen
Extrem sämtliche Attribute beeinflussen darf.
</para>

<para>
<screenshot id="stats-view-screenshot">
<screeninfo>Ansicht einer Statistik</screeninfo>
<graphic srccredit="stats-view - Screenshot" scale="40" fileref="screenshots/stats-view.png"></graphic>
</screenshot>
</para>

<para>
Konkret wird auf dieser Seite folgendes angezeigt:
</para>

<para>
<itemizedlist>
<listitem>
    <para>
    die Menülinks
    </para>

    <para>
    <itemizedlist>
    <listitem>
        <para>
        "Zurück"
        </para>

        <para>
        Link zurück zum Ausgangspunkt
        </para>
    </listitem>
    <listitem>
        <para>
        "Bearbeiten"
        </para>

        <para>
        Link um in die Bearbeiten-Oberfläche
        der Statistik zu gelangen
        (rw-Rechte erforderlich)
        </para>
    </listitem>
    <listitem>
        <para>
        "Löschen"
        </para>

        <para>
        Erlaubt das Löschen einer Statistik
        (rw-Rechte erforderlich)
        </para>
    </listitem>
    <listitem>
        <para>
        "Konfiguration exportieren"
        </para>

        <para>
        Exportieren einer Statistikkonfiguration
        mittels Dateidownload (rw-Rechte erforderlich).
        </para>

        <para>
        Verwendung: Mittels der Export- und Importfunktionen
        können Statistiken bequem auf Testsystemen entworfen
        und getestet werden, um dann anschließend einfach in
        das Produktivsystem integriert zu werden.
        </para>
    </listitem>
    </itemizedlist>
    </para>
</listitem>
<listitem>
    <para>
    Meta-Angaben (grauer Block auf der rechten Seite)
    </para>

    <para>
    Dort finden Sie Angaben zu den Erstellern der Statistik. So
    kann man an dieser Stelle entnehmen, wer wann die Statistik
    initial erstellt hat und von wem Sie zuletzt verändert wurde.
    </para>
</listitem>
<listitem>
    <para>
    die eigentlichen Statistikangaben
    </para>

    <para>
    Diese befinden sich im zentralen Block der Oberfläche.
    </para>
</listitem>
</itemizedlist>
</para>

<para>
Nachfolgend wird auf die eigentlichen Statistikeingaben eingegangen,
da diese Eingaben die Kerninformationen enthalten.
</para>

<para>
Zuerst erhält man dabei allgemeine Angaben:
</para>

<para>
<itemizedlist>
<listitem>
    <para>
    "Stat#"
    </para>

    <para>
    die Statistiknummer
    </para>
</listitem>
<listitem>
    <para>
    "Titel"
    </para>

    <para>
    der Titel der Statistik
    </para>
</listitem>
<listitem>
    <para>
    "Objekt"
    </para>

    <para>
    Objekt durch das die Statistik generiert wird
    </para>
</listitem>
<listitem>
    <para>
    "Beschreibung"
    </para>

    <para>
    die Beschreibung gibt einen tieferen Einblick
    über die Intention der Statistik.
    </para>
</listitem>
<listitem>
    <para>
    "Format"
    </para>

    <para>
    Ausgabeformat der Statistik.
    Hierbei stehen je nach Konfiguration folgende
    Ausgabeformate zur Verfügung:
    </para>

    <para>
    <itemizedlist>
    <listitem>
        <para>
        "CSV" -&gt; Download der Statistik im csv-Format
        </para>
    </listitem>
    <listitem>
        <para>
        "Drucken" -&gt; Druckfähige HTML-Tabelle oder Tabelle im PDF-Format
        </para>
    </listitem>
    <listitem>
        <para>
        "Liniendiagramm"
        </para>
    </listitem>
    <listitem>
        <para>
        "Balkendiagramm"
        </para>
    </listitem>
    <listitem>
        <para>
        "Balkendiagramm (horizontal)"
        </para>
    </listitem>
    <listitem>
        <para>
        "Punktdiagramm"
        </para>
    </listitem>
    <listitem>
        <para>
        "Linienpunktdiagramm"
        </para>
    </listitem>
    <listitem>
        <para>
        "Flächendiagramm"
        </para>
    </listitem>
    <listitem>
        <para>
        "Tortendiagramm"
        </para>
    </listitem>
    </itemizedlist>
    </para>
</listitem>
<listitem>
    <para>
    "Grafikgröße"
    </para>

    <para>
    mögliche Größe der Grafik bzw. des Diagramms.
    </para>

    <para>
    <itemizedlist>
    <listitem>
        <para>
        Angabe in Pixeln
        </para>

        <para>
        diese Auswahl bzw. Anzeige erscheint nur,
        wenn die Statistikvorkonfiguration ein
        Diagramm vorsieht bzw. ermöglicht.
        </para>
    </listitem>
    <listitem>
        <para>
        Alle generell verwendbaren Grafikgrößen
        </para>

        <para>
        werden durch den otrs-Admin in der
        SysConfig definiert. Beim
        Konfigurieren der Statistiken kann dann
        der Ersteller alle relevanten Formate
        vorselektieren.
        </para>
    </listitem>
    </itemizedlist>
    </para>
</listitem>
<listitem>
    <para>
    "Zeilensummierung"
    </para>

    <para>
    Gibt an, ob die Statistik durch eine Spalte ergänzt
    wird, deren Zellen die Summe der
    jeweiligen Zeile darstellt.
    </para>
</listitem>
<listitem>
    <para>
    "Spaltensummierung"
    </para>

    <para>
    Angabe, ob die Statistik durch eine
    Zeile ergänzt wird, deren Zellen die Summe
    der jeweiligen Spalte beinhaltet
    </para>
</listitem>
<listitem>
    <para>
    "Cache"
    </para>

    <para>
    Gibt an, ob die errechneten Statistiken im
    Dateisystem gecachet werden.
    </para>
</listitem>
<listitem>
    <para>
    "Gültig"
    </para>

    <para>
    Ist eine vorkonfigurierte Statistik erst im Entstehen
    oder darf sie aus bestimmten Gründen temporär nicht mehr
    ausgeführt werden so wird das Element "Gültig" auf
    "ungültig" gesetzt. Ferner wird dadurch die Schaltfläche
    "Start" rechts unten am Ende des Block ausgeblendet.
    Ein Generieren der Statistik ist somit nicht möglich.
    </para>
</listitem>
<listitem>
    <para>
    "Achsen vertauschen"
    </para>

    <para>
    Diese Option erlaubt es dem Agenten, die X- und
    Y-Achsen zu vertauschen (Diese Funktion muss vom
    OTRS-Administrator freigeschaltet werden).
    </para>
</listitem>
</itemizedlist>
</para>

<para>
Nach den allgemeinen Angaben sieht der Agent die Angaben zur
eigentlichen Statistik. Hierbei kommen grundsätzlich zwei
verschiedene Anzeigen zum Einsatz:
</para>

<para>
<itemizedlist>
<listitem>
    <para>
    Anzeige statischer Statistiken:
    </para>

    <para>
    Komplexe Statistiken können nicht dynamisch generiert werden.
    Hierfür kann das Statistik-Modul statische Statistik-Generatoren
    integrieren. Diese wurden von Programmierern
    speziell für die jeweilige Auswertung geschaffen. Durch die
    jeweilige Aufgabenstellung der Statistik ergeben sich
    unterschiedliche Darstellungen.
    </para>

    <para>
    <screenshot>
    <screeninfo>Ansicht der statischen Statistik</screeninfo>
    <graphic srccredit="stats-view-static - Screenshot" scale="40" fileref="screenshots/stats-view-static.png"></graphic>
    </screenshot>
    </para>
</listitem>
<listitem>
    <para>
    Dynamische Statistiken können auf zweierlei Weise angezeigt werden:
    </para>

    <para>
    <itemizedlist>
    <listitem>
        <para>
        unveränderbare Einstellungen
        </para>

        <para>
        in diesem Fall hat der Ersteller der Statistik dem Agent,
        der eine Statistik generieren will, keinen Freiraum für
        Veränderungen gelassen.
        </para>
    </listitem>
    <listitem>
        <para>
        veränderbare Einstellungen
        </para>

        <para>
        Bei derartigen Statistiken ist es dem Agent noch erlaubt
        die vorkonfigurierte Statistik zu verändern.
        </para>
    </listitem>
    </itemizedlist>
    </para>
</listitem>
</itemizedlist>
</para>

<para>
<screenshot>
<screeninfo>Ansicht einer veränderbaren dynamischen Statistik</screeninfo>
<graphic srccredit="stats-view-configurable - Screenshot" scale="40" fileref="screenshots/stats-view-configurable.png"></graphic>
</screenshot>
</para>

<para>
Um eine Statistik zu generieren, muss abschließend lediglich der
"Start"-Button am rechten unteren Ende des Blocks gedrückt werden.
Sollte einmal der "Start"-Button nicht sichtbar sein, kann dies
zwei Ursachen haben:
</para>

<para>
<orderedlist numeration="arabic">
<listitem>
    <para>
    die Statistik wurde auf ungültig gesetzt und damit deaktiviert.
    </para>
</listitem>
<listitem>
    <para>
    die Statistik wurde nicht sauber konfiguriert und ist noch
    nicht lauffähig. Ist dies der Fall, findet man die nötigen Informationen im
    Notification-Bereich von OTRS (unterhalb der Navigationsleiste).
    </para>
</listitem>
</orderedlist>
</para>

<para>
Bei falschen Einstellungen auf der Ansichtsseite wird nach
Drücken des "Start"-Button wieder die Ansichtseite gezeigt und
im Notificationbereich darauf hingewiesen, welche Eingaben falsch
waren.
</para>
</sect2>

<sect2 id='stats-modify-new'>
<title>Bearbeiten - Neu</title>

<para>
Es gibt für den Agent zwei Möglichkeiten in die Bearbeitenoberfläche des
Statistikmoduls zu gelangen:
</para>

<para>
<orderedlist numeration="arabic">
<listitem>
    <para>
    Durch den Menülink "Bearbeiten" in der Statistikansicht.
    Dadurch kann eine bestehende Statistikkonfiguration
    bearbeitet werden.
    </para>
</listitem>
<listitem>
    <para>
    durch den "Neu"-Link in der Navigationsleiste.
    </para>
</listitem>
</orderedlist>
</para>

<para>
Damit diese Links für den Agent sichtbar werden, benötigt man für
dieses Modul Schreibrechte (rw).
</para>

<para>
Das Bearbeiten der Statistiken erfolgt in vier Schritten mit Hilfe eines
Assistenten bzw. Wizards:
</para>

<para>
<orderedlist numeration="arabic">
<listitem>
    <para>
    Allgemeine Angaben zur Statistik
    </para>
</listitem>
<listitem>
    <para>
    Festlegen des Elements für die X-Achse
    </para>
</listitem>
<listitem>
    <para>
    Festlegen der Wertereihen
    </para>
</listitem>
<listitem>
    <para>
    Festlegen der Einschränkungen
    </para>
</listitem>
</orderedlist>
</para>

<para>
Die Punkte 2-4 werden nur für dynamisch zusammengestellte Statistiken
benötigt. Benutzt man eine statische Statistik ist man mit dem Einfügen der
allgemeinen Angaben in Punkt 1. bereits fertig.
</para>

<para>
Für alle Eingabeoberflächen des Statistik-Moduls gilt: Im Anschluss
an das jeweilige Eingabeformular findet der Benutzer Informationen
zur Bedienung der Seite.
</para>

<para>
Sollte es dennoch zu fehlerhaften Eingaben  kommen, wird die
zuvor bearbeitete Oberfläche wieder geladen. Dabei wird die Seite um
Informationen zur fehlerhaften Eingabe ergänzt.
Diese Informationen findet man im Notificationbereich von OTRS.
Erst nachdem ein Formular korrekt ausgefüllt wurde, gelangt man zur
nächsten Eingabeoberfläche.
</para>

<para>
<orderedlist numeration="arabic">
<listitem>
    <para>
    "Allgemeine Angaben"
    </para>

    <para>
    Die Eingabeoberfläche "Allgemeine Angaben" ist die erste Seite des
    Assistenten. Der Ersteller einer Statistik kann dort eine Vielzahl von
    allgemeinen Angaben und Einstellungen tätigen.
    </para>

    <para>
    <screenshot>
    <screeninfo>Allgemeine Angaben zur Statistik</screeninfo>
    <graphic srccredit="stats-bearbeiten-allgemein - Screenshot" scale="40" fileref="screenshots/stats-bearbeiten-allgemein.png"></graphic>
    </screenshot>
    </para>

    <para>
    <itemizedlist>
    <listitem>
        <para>
        "Titel"
        </para>

        <para>
        Er soll kurz und prägnant die Aufgabe der Statistik wiedergeben.
        </para>
    </listitem>
    <listitem>
        <para>
        "Beschreibung"
        </para>

        <para>
        Hier werden Informationen eingetragen, die einen
        tieferen Einblick in die Aufgabenstellung, Art
        der Konfigurationsparameter, usw. erlauben.
        </para>
    </listitem>
    <listitem>
        <para>
        "Dynamisches Objekt"
        </para>

        <para>
        Sollte die OTRS-Installation über mehrere
        dynamische Objekte verfügen, kann hier das
        gewünschte Objekt ausgewählt werden. Die
        Objekte sind jeweils auf die Anforderungen
        des entsprechenden Moduls ausgelegt.
        </para>
    </listitem>
    <listitem>
        <para>
        "Statische Datei"
        </para>

        <para>
        An dieser Stelle kann eine gewünschte statische
        Datei ausgewählt werden. Diese Auswahl wird für
        gewöhnlich nicht erscheinen, da nur die statischen
        Dateien angezeigt werden, die noch keiner Statistik
        zugeordnet wurden! Wenn der Punkt "Statische Datei"
        angezeigt wird, ist es wichtig im Formular
        durch die Auswahl des Optionsfelds die gewünschte
        Generierungsart auszuwählen (Dynamisch durch ein
        dynamisches Objekt oder statisch durch eine Datei).
        Wird eine statische Datei ausgewählt entfallen die
        Eingabeoberflächen 2-4, da die statische Datei die
        nötigen Konfigurationen bereits mitbringt.
        </para>
    </listitem>
    <listitem>
      <para>
        "Rechtevergabe"
        </para>

        <para>
        Durch die Rechtevergabe kann man regeln, welche Gruppen
        (und dadurch welche Agents) die vorkonfigurierten Statistiken
        später ansehen und generieren können. So können die
        verschiedenen Statistiken auf die verschiedenen Abteilungen
        und Arbeitsgruppen aufgeteilt werden, die diese benötigen.
        Eine Mehrfachauswahl ist dabei möglich.
        </para>

        <para>
        Beispiel 1: Es wurde die Gruppe "stats" selektiert. Dann wird diese Statistik
        für alle sichtbar die mindestens ro-Rechte auf die Gruppe "stats" haben. In der
        Standardkonfiguration bedeutet dies aber, dass alle Benutzer die Statistiken erzeugen
        können diese Statistik sehen können, da in der Standardkonfiguration ro-Rechte in der
        Gruppe "stats" Grundbedingung ist um überhaupt in den Ansichtsmodus des Statistikmoduls
        zu gelangen.
        </para>

        <para>
        Beispiel 2: Es wurde eine Gruppe namens "sales" selektiert. Alle Benutzer die ro-Rechte
        in der Gruppe "sales" haben können nun diese Statistik im Ansichtsmodus sehen und generieren.
        Anderen Benutzern, die in der Lage sind Statistiken zu generieren wird dann diese Statistik nicht
        angeboten.
        </para>
    </listitem>
    <listitem>
        <para>
        "Format" Ausgabeformat der Statistik
        </para>

        <para>
        Hierbei stehen je nach Konfiguration folgende
        Ausgabeformate zur Verfügung:
        </para>

        <para>
        <itemizedlist>
        <listitem>
            <para>
            "CSV" -&gt; Statistik im csv-Format
            </para>
        </listitem>
        <listitem>
            <para>
            "Drucken" -&gt; Druckfähige HTML-Tabelle oder Tabelle im PDF-Format
            </para>
        </listitem>
        <listitem>
            <para>
            "Liniendiagramm"
            </para>
        </listitem>
        <listitem>
            <para>
            "Balkendiagramm"
            </para>
        </listitem>
        <listitem>
            <para>
            "Balkendiagramm (horizontal)"
            </para>
        </listitem>
        <listitem>
            <para>
            "Punktdiagramm"
            </para>
        </listitem>
        <listitem>
            <para>
            "Linienpunktdiagramm"
            </para>
        </listitem>
        <listitem>
            <para>
            "Flächendiagramm"
            </para>
        </listitem>
        <listitem>
            <para>
            "Tortendiagramm"
            </para>
        </listitem>
        </itemizedlist>
        </para>

        <para>
        Eine Mehrfachauswahl ist möglich.
        </para>
    </listitem>
    <listitem>
        <para>
        "Grafikgröße"
        </para>

        <para>
        Hier kann ausgewählt werden, in welchen Größen die
        Diagramme ausgegeben werden dürfen.
        </para>

        <para>
        <itemizedlist>
        <listitem>
            <para>
            Angabe in Pixeln
            </para>
        </listitem>
        <listitem>
            <para>
            diese Auswahl ist nur sinnvoll, wenn unter dem Punkt "Format"
            ein grafisches Ausgabeformat ausgewählt wurde.
            </para>
        </listitem>
        <listitem>
            <para>
            alle generell verwendbaren Grafikgrößen werden
            durch den OTRS-Admin in der SysConfig
            definiert. Bei der Konfiguration der
            Statistiken kann der Ersteller alle
            relevanten Formate vorselektieren.
            </para>
        </listitem>
        </itemizedlist>
        </para>
    </listitem>
    <listitem>
        <para>
        "Zeilensummierung"
        </para>

        <para>
        Wird im Pulldownmenü "Ja" ausgewählt, wird die Statistik durch
        eine Spalte ergänzt, deren Zellen die Summe der jeweiligen
        Zeile darstellt.
        </para>
    </listitem>
    <listitem>
        <para>
        "Spaltensummierung"
        </para>

        <para>
        Angabe, ob die Statistik durch eine Zeile ergänzt
        wird, deren Zellen die Summe der jeweiligen Spalte
        beinhaltet.
        </para>
    </listitem>
    <listitem>
        <para>
        "Cache"
        </para>

        <para>
        Wird im Pulldownmenü "Ja" ausgewählt, werden die errechneten
        Statistiken im Dateisystem gecachet. Dies spart
        Rechenleistung und Zeit, sollte genau diese Statistik wieder
        aufgerufen werden.
        </para>

        <para>
        Diese Funktion ist jedoch nur sinnvoll, wenn sichergestellt ist, dass
        sich der Inhalt der Statistik nicht mehr ändert. Dies ist genau
        zu prüfen, bevor man die Cachingfunktion nutzt.
        </para>

        <para>
        Bei folgenden Situationen wird das Cachen automatisch verhindert.
        </para>

        <para>
        <itemizedlist>
        <listitem>
            <para>
            wenn die Statistik keinerlei Zeitangaben enthält.
            (Es kommen laufend neue Daten hinzu)
            </para>
        </listitem>
        <listitem>
            <para>
            wenn eine Zeitangabe in der Zukunft liegt
            </para>
        </listitem>
        </itemizedlist>
        </para>

        <para>
        Sollte eine Statistik zwischenzeitlich wieder bearbeitet werden,
        werden alle gecachten Daten wieder gelöscht.
        </para>
    </listitem>
    <listitem>
        <para>
        "Gültig"
        </para>

        <para>
        Ist eine vorkonfigurierte Statistik erst im Entstehen
        oder darf sie aus bestimmten Gründen temporär nicht mehr
        ausgeführt werden, so wird das Element "Gültig" auf "ungültig"
        gesetzt. Ferner wird dadurch die Schaltfläche "Start" in der
        "Ansehen" Oberfläche ausgeblendet. Ein Generieren
        der Statistik ist somit nicht möglich.
        </para>
    </listitem>
    </itemizedlist>
    </para>

    <para>
    Durch Drücken der Schaltfläche "Weiter" gelangt man in die nächste
    Oberfläche des Wizards.
    </para>
</listitem>
<listitem>
    <para>
    "X-Achse"
    </para>

    <para>
    Nach dem Bearbeitungsschritt "Allgemeine Angaben" folgt das Formular
    "X-Achse".
    </para>

    <para>
    <screenshot>
    <screeninfo>Festlegen des Elements für die X-Achse</screeninfo>
    <graphic srccredit="stats-edit-xaxis - Screenshot" scale="40" fileref="screenshots/stats-edit-xaxis.png"></graphic>
    </screenshot>
    </para>

    <para>
    Hier wird eingestellt welches Element für die Darstellung der X-Achse
    verwendet wird, bzw. bei Tabellen, welche Spaltenbezeichnung die
    Statistik bekommt.
    </para>

    <para>
    Als erstes wählt man ein Element per Optionsfeld aus.
    Anschließend müssen zwei oder mehr Attribute des Elements selektiert
    werden. Werden keine Attribute des Elements ausgewählt, werden alle
    Attribute verwendet, auch solche die nach der Konfiguration der
    Statistik hinzukommen.
    </para>

    <para>
    Entfernt man den Haken "Fixiert" in der Checkbox, kann der Agent, der die
    Statistik erstellt, die Attribute des entsprechenden Elements in der
    "Ansehen"-Oberfläche verändern.
    </para>

    <para>
    Eine Besonderheit stellen Zeitelemente dar, hier ist die Zeitspanne und
    die Skalierung anzugeben.
    </para>

    <para>
    Die Art und Anzahl der Elemente ergibt sich durch das verwendete
    dynamische Objekt und ist von Objekt zu Objekt verschieden.
    </para>

    <para>
    Wurden alle Eingaben richtig getätigt, gelangt man nach der Auswahl des
    "Weiter" Schalters zu dem Formular "Wertereihen". Ebenfalls gibt es die
    Möglichkeit, einen Bearbeitungsschritt zurück zu gehen und
    nochmals die Oberfläche "Allgemeine Angaben" zu bearbeiten.
    </para>
</listitem>
<listitem>
    <para>
    "Wertereihen"
    </para>

    <para>
    Im dritten Schritt der Vorkonfiguration einer Statistik werden die
    Wertereihen der Statistik festgelegt. Sie bilden später die einzelnen
    Grafen des Diagramms (grafische Darstellung) oder die einzelnen
    Reihen (tabellarische Darstellung).
    </para>

    <para>
    <screenshot>
    <screeninfo>Festlegen der Wertereihen</screeninfo>
    <graphic srccredit="stats-edit-valueseries - Screenshot" scale="40" fileref="screenshots/stats-edit-valueseries.png"></graphic>
    </screenshot>
    </para>

    <para>
    Wird ein Element selektiert, entspricht jedes ausgewählte Attribut
    einer Wertereihe.
    </para>

    <para>
    <example id='stats-value-series-1'>
    <title>Festlegen einer Wertereihe bei einem Element</title>

    <para>
    Element Queue:
    </para>

    <para>
    <itemizedlist>
    <listitem>
        <para>
        Wertereihe 1 = Raw
        </para>
    </listitem>
    <listitem>
        <para>
        Wertereihe 2 = Junk
        </para>
    </listitem>
    <listitem>
        <para>
        ....
        </para>
    </listitem>
    </itemizedlist>
    </para>
    </example>
    </para>

    <para>
    Werden zwei Elemente selektiert, wird jedes ausgewählte Attribut
    des ersten Elements kombiniert mit einem Attribut des zweiten Elements
    zu einer Wertereihe.
    </para>

    <para>
    <example id='stats-value-series-2'>
    <title>Festlegen einer Wertereihe bei zwei Elementen</title>
    <para>
    Element 1 Queue und Element 2 Status:
    </para>

    <para>
    <itemizedlist>
    <listitem>
        <para>
        Wertereihe 1 = Raw-offen
        </para>
    </listitem>
    <listitem>
        <para>
        Wertereihe 2 = Raw-erfolgreich geschlossen
        </para>
    </listitem>
    <listitem>
        <para>
        Wertereihe 3 = Junk-offen
        </para>
    </listitem>
    <listitem>
        <para>
        Wertereihe 4 = Junk-erfolgreich geschlossen
        </para>
    </listitem>
    </itemizedlist>
    </para>
    </example>
    </para>

    <para>
    Die Auswahl von drei oder mehr Elementen ist nicht sinnvoll und wird
    deshalb durch eine Fehlermeldung verhindert.
    </para>

    <para>
    Ferner gelten noch die gleichen Bedingungen zur Auswahl der
    Attribute und zur "Fixiert" Checkbox wie bei der "X-Achsen" Auswahl.
    </para>

    <para>
    <itemizedlist>
    <listitem>
        <para>
        Werden keine Attribute des Elements ausgewählt, werden alle
        Attribute verwendet, auch solche die nach der Konfiguration der
        Statistik hinzukommen.
        </para>
    </listitem>
    <listitem>
        <para>
        Entfernt man den Haken "Fixiert" in der Checkbox, kann der Agent
        der die Statistik erstellt, die Attribute des entsprechenden
        Elements verändern.
        </para>
    </listitem>
    </itemizedlist>
    </para>
</listitem>
<listitem>
    <para>
    "Einschränkungen"
    </para>

    <para>
    Vierter und letzter Schritt bei der Vorkonfiguration ist das Festlegen
    der Einschränkungen. Hier ist es möglich die Ergebnisse
    einer Statistik durch die Angabe von Bedingungen einzuschränken.
    Vergleichbar ist dies mit Eingaben in eine Suchoberfläche.
    </para>

    <para>
    <screenshot>
    <screeninfo>Festlegen der Einschränkungen</screeninfo>
    <graphic srccredit="stats-edit-restrictions - Screenshot" scale="40" fileref="screenshots/stats-edit-restrictions.png"></graphic>
    </screenshot>
    </para>

    <para>
    Es kann durchaus vorkommen, dass keine Einschränkungen getätigt werden
    müssen.
    </para>

    <para>
    Nachdem man alle Einschränkungen getätigt hat, drückt man den Button
    "Abschließen". Dadurch beendet man die Vorkonfiguration der Statistik
    und gelangt in die "Ansehen" Oberfläche.
    </para>
</listitem>
</orderedlist>
</para>

</sect2>

<sect2 id='stats-import'>
<title>Importieren</title>

<para>
Durch die Auswahl des "Import"-Links bzw. -Icons in der Navigationsleiste
gelangt man in die Importoberfläche (rw-Rechte erforderlich).
</para>

<para>
<screenshot>
<screeninfo>Die Import-Oberfläche</screeninfo>
<graphic srccredit="stats-import - Screenshot" scale="40" fileref="screenshots/stats-import.png"></graphic>
</screenshot>
</para>

<para>
Durch sie können Statistiken importiert werden. Dies ist im Zusammenhang
mit der Exportfunktion des Moduls eine sehr hilfreiche Funktionalität.
So können Statistiken bequem auf Testsystemen entworfen und getestet
werden, um sie später auf dem Produktivsystem zu importieren.
</para>

<para>
Der Import geschieht dabei ganz einfach durch einen Dateiupload.
Anschließend gelangt man automatisch in die Ansehenoberfläche der
importierten Statistik.
</para>

</sect2>

</sect1>

<sect1 id='stats-managing-the-module'>
<title>Verwaltung des Statistik-Moduls durch den OTRS-Administrator</title>

<para>
In diesem Abschnitt werden die Aufgaben und Möglichkeiten des
OTRS-Administrators in Bezug auf das Statistikmodul angesprochen.
</para>

<sect2 id='stats-permissions'>
<title>Rechte, Gruppen und Queues</title>

<para>
Durch die Installation des Statistikmoduls
werden keine neuen Queues oder/und Gruppen angelegt.
</para>

<para>
Durch die Standardkonfiguration der Modulregistrierung haben alle
Agenten, die Rechte in der "stats"-Gruppe haben, Zugriff auf das
Statistikmodul.
</para>

<para>
Zugangsmöglichkeiten auf Grund der Rechte:
</para>

<para>
<itemizedlist>
<listitem>
    <para>
    "rw" -&gt; darf Statistiken konfigurieren
    </para>
</listitem>
<listitem>
    <para>
    "ro" -&gt; darf vorkonfigurierte Statistiken generieren
    </para>
</listitem>
</itemizedlist>
</para>

<para>
Ob nun dem jeweiligen Agenten, der später vorkonfigurierte Statistiken
generieren darf, ro-Rechte in der "stats" Gruppe zugewiesen werden oder
in der Modulregistrierung der SysConfig die dem Agent entsprechenden Gruppen
ergänzt werden, bleibt dem OTRS-Administrator und dessen Anforderungen
überlassen.
</para>

</sect2>

<sect2 id='stats-sysconfig'>
<title>SysConfig</title>

<para>
Die SysConfig-Gruppen

<link linkend="Framework:Core::Stats">
Framework:Core::Stats
</link>

,

<link linkend="Framework:Core::Stats::Graph">
Framework:Core::Stats::Graph
</link>

und

<link linkend="Framework:Frontend::Agent::Stats">
Framework:Frontend::Agent::Stats
</link>

enthalten alle Konfigurationsparameter zur grundlegenden Einstellung des
Statistik-Moduls. Weiterhin regelt der Konfigurationsparameter

<link linkend="Framework:Frontend::Agent::ModuleRegistration:Frontend::Module_AgentStats">
$Self-&gt;{'Frontend::Module'}-&gt;{'AgentStats'}
</link>

die Anordnung und Registrierung der Module und Icons innerhalb des
Statistik-Moduls selbst.
</para>

</sect2>

</sect1>

<sect1 id='stats-managing-the-stats-module-by-the-sysadmin'>
<title>Verwaltung des Statistik-Moduls durch den System-Administrator</title>

<para>
Grundsätzlich ist bei der Bedienung, Konfiguration und Wartung
des Statistikmoduls kein System-Administrator notwendig. An dieser
Stelle sollen nur einige Hintergrundinformationen für den System-
Administrator gegeben werden.
</para>

<note>
<para>
Pfadangaben beziehen sich auf Unterverzeichnisse des
OTRS-Homeverzeichnisses (meist <filename>/opt/otrs</filename>.
</para>
</note>

<sect2 id='stats-db-table'>
<title>Datenbanktabelle</title>

<para>
Alle Statistikkonfigurationen werden in XML umgesetzt und verwaltet.
Dies bedeutet unter anderem, dass alle Statistikkonfigurationen in der
Datenbanktabelle "xml\_storage" gespeichert werden.
Diese Tabelle wird auch von anderen Modulen benutzt, deren Inhalte im
XML-Format dargestellt werden.
</para>
</sect2>

<sect2 id='stats-filelist'>
<title>Auflistung aller Dateien</title>

<para>
Folgende Dateien sind für die fehlerfreie Funktion des Statistikmoduls
notwendig.
</para>

<para>
<itemizedlist>
<listitem>
<para>
<filename>Kernel/System/Stats.pm</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Modules/AgentStats.pm</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/System/CSV.pm</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Output/HTML/Standard/AgentStatsOverview.dtl</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Output/HTML/Standard/AgentStatsDelete.dtl</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Output/HTML/Standard/AgentStatsEditSpecification.dtl</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Output/HTML/Standard/AgentStatsEditRestrictions.dtl</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Output/HTML/Standard/AgentStatsEditXaxis.dtl</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Output/HTML/Standard/AgentStatsEditValueSeries.dtl</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Output/HTML/Standard/AgentStatsImport.dtl</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Output/HTML/Standard/AgentStatsPrint.dtl</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/Output/HTML/Standard/AgentStatsView.dtl</filename>
</para>
</listitem>
<listitem>
<para>
<filename>Kernel/System/Stats/Dynamic/Ticket.pm</filename>
</para>
</listitem>
<listitem>
<para>
<filename>bin/mkStats.pl</filename>
</para>
</listitem>
</itemizedlist>
</para>

</sect2>

<sect2 id='stats-caching'>
<title>Caching</title>

<para>
Bei der Vorkonfiguration von Statistiken kann eingestellt
werden, ob die Ergebnisse einer Statistik gecachet werden oder
nicht. Gecachete Statistikergebnisse werden als Datei im
Verzeichnis <filename>var/tmp</filename> der OTRS-Installation
gespeichert (meist <filename>/opt/otrs/var/tmp</filename>).
</para>

<para>
Alle gecacheten Statistiken sind dabei durch das Präfix "Stats" zu erkennen.
</para>

<para>
Sollten diese Dateien verloren gehen, ist dies nicht weiter
schlimm. Beim nächsten Aufruf dieser Statistik
kann das Statistikmodul diese Datei nicht mehr finden und
muss deshalb die Statistik neu errechnen, was etwas Zeit
beanspruchen kann.
</para>


</sect2>

<sect2 id='stats-mkstats'>
<title>mkStats.pl</title>

<para>
Diese Datei befindet sich im Verzeichnis <filename>bin/</filename>.
Durch sie ist es möglich Statistiken per Kommandozeile
zu generieren.
</para>

<para>
Exemplarisch soll hierzu folgender Kommandozeilenaufruf
stehen:
</para>

<para>
<programlisting>
bin&gt; perl mkStats.pl -n 10004 -o /output/dir
</programlisting>
</para>

<para>
Dabei wird eine Statistik aus der Statistikkonfiguration "Stat# 10004"
generiert und als csv in das Verzeichnis <filename>/output/dir</filename>
gespeichert.
</para>

<para>
Ferner kann die generierte Statistik auch per Email versandt werden.
Mehr Informationen erhält man durch den Aufruf
</para>

<para>
<programlisting>
bin&gt; perl mkStats.pl --help
</programlisting>
</para>

</sect2>

<sect2 id='stats-cron'>
<title>Automatisiertes Generieren von Statistiken - Cron</title>

<para>
Sinnvoll ist das Generieren von Statistiken per Hand über
die Kommandozeile natürlich nicht unbedingt, da das
Statistikmodul eine geeignete grafische Oberfläche bietet.
Interessant wird die Generierung von Statistiken per Kommandozeile
aber in Kombination mit einem Cronjob.
</para>

<para>
Folgendes Szenario ist denkbar: Ein Abteilungsleiter
wünscht pünktlich zum ersten eines Monats eine Statistik
zum abgelaufenen Monat. Durch die Kombination Cronjob
und Kommandozeilenaufruf ist man in der Lage automatisiert
zu Beginn eines Monats dem Abteilungsleiter die
gewünschte Statistik per Email zukommen zu lassen.
</para>

</sect2>

<sect2 id='stats-static'>
<title>Statische Statistiken</title>

<para>
Das Statistikmodul bietet die Möglichkeit statische Statistiken
zu generieren. Für jede statische Statistik gibt es eine
Datei in der die Inhalte der Statistik genau definiert sind.
</para>

<para>
Vorteil dieser Art von Statistik ist, dass dadurch sehr komplexe
Statistiken erzeugt werden können. Der Nachteil ist wiederum
die mangelnde Flexibilität dieser Statistiken.
</para>

<para>
Gespeichert werden diese Dateien unter folgendem Pfad
<filename>Kernel/System/Stats/Static/</filename>.
</para>

</sect2>

<sect2 id='stats-using-old-stats'>
<title>Wiederverwerten alter statischer Statistiken</title>

<para>
Bereits das Standard OTRS Version 1.3 und 2.0 bietet die Möglichkeit
Statistiken zu generieren. Eine Vielzahl der Statistiken, die für
OTRS-Versionen 1.3 und 2.0 speziell auf Kundenwunsch entwickelt wurden,
können wiederverwendet werden.
</para>

<para>
Diese Dateien müssen hierzu lediglich aus dem Pfad <filename>Kernel/System/Stats/</filename> in
den Pfad <filename>Kernel/System/Stats/Static/</filename> verschoben werden. Ferner muss
die Paketangabe des jeweiligen Skripts um "::Static" ergänzt werden.
</para>

<para>
Z. B. wird aus
</para>

<para>
<programlisting>
    package Kernel::System::Stats::AccountedTime;
</programlisting>
</para>

<para>
<programlisting>
    package Kernel::System::Stats::Static::AccountedTime;
</programlisting>
</para>

</sect2>

<sect2 id='stats-default-stats'>
<title>Defaultstatistiken</title>

<para>
"Man muss das Rad nicht immer neu erfinden."
</para>

<para>
Deshalb liefert das Statistikmodul automatisch Defaultstatistiken mit.
Statistiken, die für alle OTRS-Benutzer interessant sind, werden zukünftig
als Defaultstatistik im Statistik-Modul-Paket ergänzt. Gespeichert werden
die Defaultstatistiken im XML-Format des Statistikmoduls im Verzeichnis
<filename>scripts/test/sample/</filename>.
</para>

</sect2>

</sect1>

</chapter>
